<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="MoVcrKIvICpF0DzKyXDtvqMIot-U_-AToxw63nB4cOA">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cliuyang.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"gittalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-1}}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
<meta name="keywords" content="博客,程序员,IT">
<meta property="og:type" content="website">
<meta property="og:title" content="陈留阳">
<meta property="og:url" content="https://cliuyang.github.io/index.html">
<meta property="og:site_name" content="陈留阳">
<meta property="og:description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="陈留阳">
<meta name="twitter:description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">

<link rel="canonical" href="https://cliuyang.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>陈留阳</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">陈留阳</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">27</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">7</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">11</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NsaXV5YW5n" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/07/12/VScode-C-Algorithmic-Competition/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/12/VScode-C-Algorithmic-Competition/" class="post-title-link" itemprop="url">以最优雅的方式做算法竞赛</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-12 18:29:30" itemprop="dateCreated datePublished" datetime="2019-07-12T18:29:30+08:00">2019-07-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-17 00:31:30" itemprop="dateModified" datetime="2020-05-17T00:31:30+08:00">2020-05-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>自从在大学入坑了<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU1JTlCJUJEJUU5JTk5JTg1JUU1JUE0JUE3JUU1JUFEJUE2JUU3JTk0JTlGJUU3JUE4JThCJUU1JUJBJThGJUU4JUFFJUJFJUU4JUFFJUExJUU3JUFCJTlFJUU4JUI1JTlC">ICPC<i class="fa fa-external-link-alt"></i></span>这类算法比赛，就沉迷其中，在集训队的时候花上一整天做各种各样的比赛，写各种各样的题目，日常的话，也会在深夜打开<span class="exturl" data-url="aHR0cDovL2NvZGVmb3JjZXMuY29tLw==">codeforces<i class="fa fa-external-link-alt"></i></span>，参加一场场的掉分赛/(ㄒoㄒ)/~~</p>
<p><img src="/2019/07/12/VScode-C-Algorithmic-Competition/LifeGoals.png" alt="LifeGoals"></p>
<p>刚开始写比赛的时候，用的IDE是Dev C++，这款IDE上手简单，对新手比较友好，但是调试能力较弱；之后改用CodeBlocks，相对而言功能更加丰富，可自定义的地方也比较多，但麻烦之处在于需要建工程，以及对我来说，调试相当不友好，UI也比较丑；也见过有人使用Visual Studio，不过庞大的体量让我瞬间失去了用它做题的想法。</p>
<p>除了IDE本身的缺陷，还有一个比较难以忍受的共性问题是，竞赛的输入输出是分开的，区分十分清晰，但选手在编写程序的时候，需要在终端里同时完成输入输出，难免会产生混乱，如果在代码中使用了重定向，又需要分心去管理重定向的事情，就有点舍本逐末了。</p>
<p>综上，理想中算法竞赛刷题工具应有以下几个便利点：</p>
<ol>
<li>允许单文件编译运行，使得做一道题目不需要大费周章的建立工程，只需要一个单文件。</li>
<li>界面美观，友好，调试方便。</li>
<li>直接重定向到文件。</li>
</ol>
<p>一番摸索之后，我选择的工具是vscode，主要是基于一下几点考虑：</p>
<ol>
<li>界面美观。</li>
<li>编辑器可自由拖拽，观看方便。</li>
<li>拥有大量插件，功能高度自定义。</li>
</ol>
<p>于是，踏上了配置之旅。</p>
<p><strong>想看简易配置过程直接拉到最后。</strong></p>
<h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><p><img src="/2019/07/12/VScode-C-Algorithmic-Competition/Effect.png" alt="效果图"></p>
<p>主要功能：</p>
<ul>
<li>源代码放在 <strong>src</strong> 文件夹中，编译生成的可执行程序在 <strong>bin</strong> 文件夹中，用于重定向的输入输出文件放在 <strong>data</strong> 中，vscode的配置文件放在 <strong>.vscode</strong> 中。</li>
<li>在一个源文件中编写完程序之后按下<strong>F5</strong>一键编译运行，程序重定向输入自<strong>data.in</strong>，重定向输出至<strong>data.out</strong>中。</li>
<li>可自由选择需要编译的源文件，各个文件之间不冲突。</li>
</ul>
<h2 id="配置思路"><a href="#配置思路" class="headerlink" title="配置思路"></a>配置思路</h2><p>本配置是从官方的配置魔改而来，先贴一下官方的 <strong>task.json</strong> 及 <strong>launch.json</strong> 两个配置文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// task.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">    <span class="attr">"tasks"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"build hello world"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"g++"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                <span class="string">"-g"</span>,</span><br><span class="line">                <span class="string">"-o"</span>,</span><br><span class="line">                <span class="string">"helloworld"</span>,</span><br><span class="line">                <span class="string">"helloworld.cpp"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"group"</span>: &#123;</span><br><span class="line">                <span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">                <span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//launch.json</span><br><span class="line">&#123;</span><br><span class="line">   <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/helloworld.exe"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [],</span><br><span class="line">            <span class="attr">"stopAtEntry"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">            <span class="attr">"environment"</span>: [],</span><br><span class="line">            <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">            <span class="attr">"miDebuggerPath"</span>: <span class="string">"C:/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/gdb.exe"</span>,</span><br><span class="line">            <span class="attr">"setupCommands"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                    <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不难看出，<strong>task.json</strong>中的<strong>build hello world</strong>任务是调用了<strong>g++</strong>命令，而它的参数是 <strong>-g -o helloworld helloworld.cpp</strong>，即编译<strong>helloworld.cpp</strong>；<strong>launch.json</strong>则是在编译完后调试 <strong>${workspaceFolder}</strong> 目录下的<strong>helloworld.exe</strong>。</p>
<p>而我们希望的功能是编译任意一个单源文件，并重定向输入输出。在task中需要指定编译文件的路径，vscode提供了几个<span class="exturl" data-url="aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20vZG9jcy9lZGl0b3IvdmFyaWFibGVzLXJlZmVyZW5jZQ==">预定义的宏变量<i class="fa fa-external-link-alt"></i></span>用来表示路径。</p>
<p><img src="/2019/07/12/VScode-C-Algorithmic-Competition/Variable.png" alt="宏"></p>
<p>那么，可以通过 <strong>${file}</strong> 来表示正在编辑的文件路径，使用 <strong>${workspaceFolder}</strong> 加上相对路径以及 <strong>${fileBasenameNoExtension}</strong> 来指定生成可执行文件的路径与名称。那么，假如源文件都在<strong>src</strong>文件夹中，希望生成的可执行文件都在<strong>bin</strong>中，则<strong>task.json</strong>中的<strong>args</strong>参数修改为</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"args": [</span><br><span class="line">    "-g", "$&#123;file&#125;",</span><br><span class="line">    "-o", "$&#123;workspaceFolder&#125;/bin/$&#123;fileBasenameNoExtension&#125;.exe"</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>而重定向则可以由 <strong>&gt;</strong> 与 <strong>&lt;</strong> 来进行，假如希望重定向的文件都在<strong>data</strong>文件夹中，输入文件为<strong>data.in</strong>，输出文件为<strong>data.out</strong>，则<strong>launch.json</strong>中的<strong>program</strong>与<strong>args</strong>参数修改为</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"program": "$&#123;workspaceFolder&#125;/bin/$&#123;fileBasenameNoExtension&#125;.exe",</span><br><span class="line">"args": [</span><br><span class="line">    "&lt;",</span><br><span class="line">    "$&#123;workspaceFolder&#125;/data/data.in",</span><br><span class="line">    "&gt;",</span><br><span class="line">    <span class="string">"$&#123;workspaceFolder&#125;/data/data.out"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>大功告成。</p>
<h2 id="简易配置过程"><a href="#简易配置过程" class="headerlink" title="简易配置过程"></a>简易配置过程</h2><ol>
<li><p>按照<span class="exturl" data-url="aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20vZG9jcy9jcHAvY29uZmlnLW1pbmd3">官方教程<i class="fa fa-external-link-alt"></i></span>或者<a href="\2018\12\01\c-withVScode\index.html">我之前的文章</a>配置好一个C/C++编程环境。</p>
</li>
<li><p>在工作目录下新建<strong>bin</strong>，<strong>data</strong>，<strong>src</strong>三个文件夹，将源文件放入<strong>src</strong>文件夹中，可执行文件放入<strong>bin</strong>中。</p>
</li>
<li><p>在<strong>data</strong>文件夹中新建两个文本文件，分别为<strong>data.in</strong>与<strong>data.out</strong>。此时工作区的文件结构为：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">|--.vscode</span><br><span class="line">|   --c_cpp_properties.json</span><br><span class="line">|   --launch.json</span><br><span class="line">|   --settings.json</span><br><span class="line">|   --tasks.json</span><br><span class="line">|--bin</span><br><span class="line">|   --helloworld.exe</span><br><span class="line">|--data</span><br><span class="line">|   --data.in</span><br><span class="line">|   --data.out</span><br><span class="line">|-src</span><br><span class="line">|   --helloworld.cpp</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改<strong>task.json</strong>中的参数<strong>args</strong></p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"args": [</span><br><span class="line">    "-g", "$&#123;file&#125;",</span><br><span class="line">    "-o", "$&#123;workspaceFolder&#125;/bin/$&#123;fileBasenameNoExtension&#125;.exe"</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p> 此时<strong>task.json</strong>应该类似于：</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">    <span class="attr">"tasks"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"build hello world"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"g++"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                <span class="string">"-g"</span>,</span><br><span class="line">                <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">                <span class="string">"-o"</span>,</span><br><span class="line">                <span class="string">"$&#123;workspaceFolder&#125;/bin/$&#123;fileBasenameNoExtension&#125;.exe"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"group"</span>: &#123;</span><br><span class="line">                <span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">                <span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改<strong>launch.json</strong>中的参数<strong>program</strong>与<strong>args</strong>为</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"program": "$&#123;workspaceFolder&#125;/bin/$&#123;fileBasenameNoExtension&#125;.exe",</span><br><span class="line">"args": [</span><br><span class="line">    "&lt;",</span><br><span class="line">    "$&#123;workspaceFolder&#125;/data/data.in",</span><br><span class="line">    "&gt;",</span><br><span class="line">    <span class="string">"$&#123;workspaceFolder&#125;/data/data.out"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p> 此时<strong>launch.json</strong>应该类似于：</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line"><span class="attr">"configurations"</span>: [&#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">        <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">        <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/bin/$&#123;fileBasenameNoExtension&#125;.exe"</span>,</span><br><span class="line">        <span class="attr">"args"</span>: [</span><br><span class="line">            <span class="string">"&lt;"</span>,</span><br><span class="line">            <span class="string">"$&#123;workspaceFolder&#125;/data/data.in"</span>,</span><br><span class="line">            <span class="string">"&gt;"</span>,</span><br><span class="line">            <span class="string">"$&#123;workspaceFolder&#125;/data/data.out"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"stopAtEntry"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">        <span class="attr">"environment"</span>: [],</span><br><span class="line">        <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">        <span class="attr">"miDebuggerPath"</span>: <span class="string">"C:/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/gdb.exe"</span>,</span><br><span class="line">        <span class="attr">"setupCommands"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置完成,拖拽编辑器到合适的位置</p>
</li>
<li><p>编辑完代码后，按下<strong>F5</strong>一键编译运行，程序将重定向输入自data/data.in，重定向输出至data.out</p>
</li>
<li><p>保存一份配置好的文件夹作为模板，后续需要做比赛的时候复制一份。</p>
</li>
</ol>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>本次配置难度不是很大，灵活使用vscode的宏变量进行配置，也比较好理解。最终的结果满足了我打比赛的需求，不过还是存在一下几点问题：</p>
<ol>
<li>每次使用都需要重新设置一下布局，虽然不是很麻烦但是很繁琐。</li>
<li>无法识别编辑文件的文件类型，如果在修改了data.in后直接编译，会报错。</li>
</ol>
<p>好了，开开心心掉分去QAQ。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/03/08/c-withVScode-second/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/08/c-withVScode-second/" class="post-title-link" itemprop="url">使用VScode编写C++工程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-03-08 19:32:13" itemprop="dateCreated datePublished" datetime="2019-03-08T19:32:13+08:00">2019-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-03-09 16:46:10" itemprop="dateModified" datetime="2019-03-09T16:46:10+08:00">2019-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/vscode/" itemprop="url" rel="index"><span itemprop="name">vscode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>VS code 是个功能强大，可扩展性极强的编辑器，通过添加一些插件，修改一下配置即可发挥强大的功能。</p>
<p>前些日子（其实好久了哈 (￣ y▽ ￣)~*），通过阅读官网的文档，成功<a href="\2018\12\01\c-withVScode\index.html">配置了 C++的编程环境</a>，然后用了很久。但是最近遇见了个很严重的问题，那就是按照官网的文档走的话，最终只能编译，调试，运行一个单独的文件。</p>
<p>这就很难受了，虽说刷刷算法题也不需要多个文件，使用 g++的一些较为复杂的参数也可以编译链接多个文件，但是，到底能不能使用 VS code 来编写具有一定规模的 C/C++工程呢？</p>
<p>于是，折腾开始了，而且最终取得了很不错的成果。(≖‿≖)✧</p>
<h2 id="折腾之前"><a href="#折腾之前" class="headerlink" title="折腾之前"></a>折腾之前</h2><p>因为之前的配置，所以计算机上至少有的环境是：安装好了 MingW，设置过了全局，安装了官网文档中所需要的插件以及写好了配置。</p>
<p>要是这一步没有做过的话可以参考我之前的文章<a href="\2018\12\01\c-withVScode\index.html"><strong>使用 VScode 编写 C++文件</strong></a>，或者阅读<a href="https://code.visualstudio.com/docs/languages/cpp" target="_blank" rel="noopener"><strong>官方文档</strong></a>。</p>
<p>准备好了，开始！ o(*≧▽≦)ツ</p>
<h2 id="安装-C-C-Project-Generator"><a href="#安装-C-C-Project-Generator" class="headerlink" title="安装 C/C++ Project Generator"></a>安装 C/C++ Project Generator</h2><p>在最早配置 C++编程环境的时候，就有过这个插件的印象，只是没实际使用过，不过，看名字貌似是我们想要的插件，emmmm，那就安装！</p>
<p><img src="/2019/03/08/c-withVScode-second/C_C++ProjectGenerator.png" alt="C/C++ProjectGenerator"></p>
<p>按照文档的提示：</p>
<blockquote>
<p>How to use</p>
<ol>
<li>Go to command pallete (usually : ctrl + shift + p)</li>
<li>Search for “Create C project” or “Create c++ project” depending on your preference</li>
<li>Select the folder where the project should be created</li>
<li>That’s it, project will open</li>
</ol>
</blockquote>
<ol>
<li>使用<strong>ctrl</strong> + <strong>shift</strong> + <strong>p</strong> 调出命令界面。</li>
<li>根据需要输入 <strong><em>Create C project</em></strong> 或者 <strong><em>Create c++ project</em></strong> 查找相关命令选择建立 C 工程或者 C++工程（本次折腾用的是 C++工程）</li>
<li>选择希望在哪里建立工程</li>
<li>到这里就结束了，工程建立完毕</li>
</ol>
<p>嗯，那根据它的说法来一次。</p>
<p><img src="/2019/03/08/c-withVScode-second/CreateProjectStart.png" alt="CreateProjectStart"></p>
<p><img src="/2019/03/08/c-withVScode-second/ChooseFile.png" alt="ChooseFile"></p>
<p><img src="/2019/03/08/c-withVScode-second/CreateProjectEnd.png" alt="CreateProjectEnd"></p>
<p>可以看到已经有了一个工程的雏形，插件也很贴心的给了示例程序。</p>
<p>那好，然后按下<strong>F5</strong>开始调试。</p>
<p>∑(っ °Д°;)っ开始运行了！竟然如此简单！</p>
<p>完结撒花( ^３^ )╱~~❀❀❀</p>
<p><img src="/2019/03/08/c-withVScode-second/DebugFailed.png" alt="DebugFailed"></p>
<p>才怪(/= _ =)/~┴┴</p>
<h2 id="修改-launch-json-文件"><a href="#修改-launch-json-文件" class="headerlink" title="修改 launch.json 文件"></a>修改 launch.json 文件</h2><p>那好，咱们去<strong>launch.json</strong>看看。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Debug"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/bin/main.exe"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [],</span><br><span class="line">      <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceRoot&#125;"</span>,</span><br><span class="line">      <span class="attr">"environment"</span>: [],</span><br><span class="line">      <span class="attr">"externalConsole"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">"preLaunchTask"</span>: <span class="string">"build"</span>,</span><br><span class="line">      <span class="attr">"linux"</span>: &#123;</span><br><span class="line">        <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"osx"</span>: &#123;</span><br><span class="line">        <span class="attr">"MIMode"</span>: <span class="string">"lldb"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"windows"</span>: &#123;</span><br><span class="line">        <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>emmmm 还是能简单看懂一些的了，大致是在官方的模板下少许修改了一下，甚至贴心的为不同的环境选择了不同的调试器，那么，问题出在哪里呢？</p>
<p>贴一下之前按照官方给的配置文件模板。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/a.exe"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [],</span><br><span class="line">      <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">      <span class="attr">"environment"</span>: [],</span><br><span class="line">      <span class="attr">"externalConsole"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">      <span class="attr">"miDebuggerPath"</span>: <span class="string">"C:\\mingw\\bin\\gdb.exe"</span>,</span><br><span class="line">      <span class="attr">"setupCommands"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">          <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">          <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"preLaunchTask"</span>: <span class="string">"build hello world"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>稍加思索</p>
<p>显然，该配置文件没有配置调试器的路径，于是加上配置<code>&quot;miDebuggerPath&quot;</code>，一通魔改融合后，修改完的<strong>launch.json</strong>长这个样子：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/bin/main.exe"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [],</span><br><span class="line">      <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">      <span class="attr">"environment"</span>: [],</span><br><span class="line">      <span class="attr">"externalConsole"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">      <span class="attr">"miDebuggerPath"</span>: <span class="string">"C:\\MinGW\\mingw64\\bin\\gdb.exe"</span>,</span><br><span class="line">      <span class="attr">"setupCommands"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">          <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">          <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"preLaunchTask"</span>: <span class="string">"build"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>=￣ ω ￣= 因为我还只是在 Windows 上配置环境，没考虑跨平台，于是就只保留了 Windows 上的配置。</p>
<p><code>miDebuggerPath</code>和<code>preLaunchTask</code>的值因人而异吧，我是改了一堆，但实际上只需要加上<code>miDebuggerPath</code>就行了。</p>
<p>那，再试试？</p>
<p><img src="/2019/03/08/c-withVScode-second/HelloWorld.png" alt="HelloWorld"></p>
<p>喜极而泣(´°̥̥̥̥̥̥̥̥ω°̥̥̥̥̥̥̥̥ ｀)</p>
<p>开开心心设断点，开开心心 debug(｀･ω･´)</p>
<p><img src="/2019/03/08/c-withVScode-second/BreakpointFailed.png" alt="BreakpointFailed"></p>
<p>喵~？</p>
<p>我的断点呢？</p>
<p>它怎么灰了 ಠ౪ಠ？</p>
<p>它怎么没停下来 ಥ_ಥ？</p>
<p>怎么变量没自己打开 (╯‵□′)╯︵┻━┻？</p>
<p>我去，还是无效值(╬▔ 皿 ▔)！</p>
<p>(/“≡ _ ≡)/~┴┴</p>
<h2 id="g-g"><a href="#g-g" class="headerlink" title="g++ -g"></a>g++ -g</h2><p>鬼知道我查了多久资料( ＿ ＿)ノ｜</p>
<p>来大致谈谈这个插件的一些细节。</p>
<p>作者的思路蛮正确的，基本上还是官方给的配置，然后魔改了一下，比如说<code>task</code>里需要放很多的任务，其中有一个叫做“build”，在官网的模板中，这个任务是要调用命令行里的<code>g++</code>命令来编译程序，但是指定了编译时的源文件与生成文件，这就导致写代码的时候文件名不能出错。</p>
<p>但实际上在一个工程中，需要编译的文件可能是多个，所依赖的头文件也会是多个，这些在生成可执行程序的时候都是需要考虑到的，诚然，可以通过 g++丰富的参数写下长长的命令来实现编译链接多个源文件，可是毕竟麻烦，而且还容易出错。</p>
<p>于是作者使用了 <strong><em>Makefile</em></strong> 这个工具。Makefile 是一个比较有意思的工具，简单的说，它可以通过检查一些依赖项，然后调用一些命令加上相应的参数生成所需要的文件。</p>
<p>用在编译程序上可谓是刚刚好。</p>
<p>所以在作者的修改下，task 文件中的任务被描述为调用 Makefile 的一些命令，而 Makefile 里又进行了相应的配置，将依赖项分别放入<em>src</em>，_lib_，<em>include</em>中，调用<em>g++</em>命令编译文件。</p>
<p>Makefile 里最重要的几句无疑就是最后这个了：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$(BIN)</span>/<span class="variable">$(EXECUTABLE)</span>: <span class="variable">$(SRC)</span>/*</span><br><span class="line">    <span class="variable">$(CC)</span> <span class="variable">$(C_FLAGS)</span> -I<span class="variable">$(INCLUDE)</span> -L<span class="variable">$(LIB)</span> <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIBRARIES)</span></span><br></pre></td></tr></table></figure>

<p>这句中的 CC 是命令<code>g++</code>，后面相关的参数有<code>-I</code>，<code>-L</code>，<code>-o</code>等，这些参数的详细说明我就不介绍了，贴出来我查找到的一些资料：</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbGlkYW4vYXJjaGl2ZS8yMDExLzA1LzI1LzIyMzk1MTcuaHRtbA==">g++命令参数的作用即用法<i class="fa fa-external-link-alt"></i></span></p>
<p>那么问题出现在哪里呢？</p>
<p>再列出我参考的一些资料：</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9tYXJrZXRwbGFjZS52aXN1YWxzdHVkaW8uY29tL2l0ZW1zP2l0ZW1OYW1lPWRhbmllbHBpbnRvOHp6Ni5jLWNwcC1wcm9qZWN0LWdlbmVyYXRvciNyZXZpZXctZGV0YWlscw==">C/C++ Project Generator 的反馈中，国外某位程序员的回答<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDgyNjgyMjYvdnMtY29kZS1pcy1pZ25vcmluZy10aGUtYnJlYWtwb2ludC1pbi1jLWRlYnVnZ2luZz8=">StackOverFlow 上，关于 VS code 无法调试的回答<i class="fa fa-external-link-alt"></i></span></p>
<p>以及官网给出的<code>task</code>模板：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">  <span class="attr">"tasks"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"label"</span>: <span class="string">"build hello world"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">      <span class="attr">"command"</span>: <span class="string">"g++"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [<span class="string">"-g"</span>, <span class="string">"helloworld.cpp"</span>],</span><br><span class="line">      <span class="attr">"group"</span>: &#123;</span><br><span class="line">        <span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">        <span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然一下子列出来资料会得出显而易见的结论，但鬼知道为了找到这些资料有多辛苦（╯－＿－）╯╧╧</p>
<p>总的来说，就是原作者在写<em>Makefile</em>的时候，漏掉了一个参数<code>-g</code>，导致无法调试，那么所需要进行的修改就是给它加上。</p>
<p>修改后的 Makefile 最后几句如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$(BIN)</span>/<span class="variable">$(EXECUTABLE)</span>: <span class="variable">$(SRC)</span>/*</span><br><span class="line">    <span class="variable">$(CC)</span> <span class="variable">$(C_FLAGS)</span> -I<span class="variable">$(INCLUDE)</span> -L<span class="variable">$(LIB)</span> -g <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIBRARIES)</span></span><br></pre></td></tr></table></figure>

<p>调试，启动(*ﾟ ▽ ﾟ*)</p>
<p><img src="/2019/03/08/c-withVScode-second/DebugSuccess.png" alt="DebugSuccess"></p>
<p>开开心心 Debug。（＾ ∀ ＾）</p>
<h2 id="完整的配置"><a href="#完整的配置" class="headerlink" title="完整的配置"></a>完整的配置</h2><p>贴出魔改之后我的配置文件吧：</p>
<p><em><em>launch.json</em></em></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/bin/main.exe"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [<span class="string">"&lt;"</span>, <span class="string">"bin\\data.in"</span>, <span class="string">"&gt;"</span>, <span class="string">"bin\\data.out"</span>],</span><br><span class="line">      <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">      <span class="attr">"environment"</span>: [],</span><br><span class="line">      <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">      <span class="attr">"miDebuggerPath"</span>: <span class="string">"C:\\MinGW\\mingw64\\bin\\gdb.exe"</span>,</span><br><span class="line">      <span class="attr">"setupCommands"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">          <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">          <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"preLaunchTask"</span>: <span class="string">"build main"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><em>task.json</em></em></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">  <span class="attr">"tasks"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"label"</span>: <span class="string">"build main"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">      <span class="attr">"command"</span>: <span class="string">"powershell"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [<span class="string">"-c"</span>, <span class="string">"mingw32-make"</span>],</span><br><span class="line">      <span class="attr">"group"</span>: &#123;</span><br><span class="line">        <span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">        <span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><em>Makefile</em></em></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">CC      := g++</span><br><span class="line">C_FLAGS := -std=c++17 -Wall -Wextra</span><br><span class="line"></span><br><span class="line">BIN     := bin</span><br><span class="line">SRC     := src</span><br><span class="line">INCLUDE := <span class="keyword">include</span></span><br><span class="line">LIB     := lib</span><br><span class="line"></span><br><span class="line">LIBRARIES   :=</span><br><span class="line"></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(OS)</span>,Windows_NT)</span><br><span class="line">EXECUTABLE  := main.exe</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">EXECUTABLE  := main</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="section">all: <span class="variable">$(BIN)</span>/<span class="variable">$(EXECUTABLE)</span></span></span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    <span class="variable">$(RM)</span> <span class="variable">$(BIN)</span>/<span class="variable">$(EXECUTABLE)</span></span><br><span class="line"></span><br><span class="line"><span class="section">run: all</span></span><br><span class="line">    ./<span class="variable">$(BIN)</span>/<span class="variable">$(EXECUTABLE)</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(BIN)</span>/<span class="variable">$(EXECUTABLE)</span>: <span class="variable">$(SRC)</span>/*</span><br><span class="line">    <span class="variable">$(CC)</span> <span class="variable">$(C_FLAGS)</span> -I<span class="variable">$(INCLUDE)</span> -L<span class="variable">$(LIB)</span> -g <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIBRARIES)</span></span><br></pre></td></tr></table></figure>

<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>折腾了一天后，有了个较为完善的解决方案，很可惜的是，没有找到可以完美创建，调试 C++工程的插件，但是可以根据已有的思路一步步完善自己的配置。</p>
<p>我的想法是，将已经配置好的 vscode 工程文件存为模板文件，需要的时候拷贝一份使用，于是，原插件也用不上了。</p>
<p>其实原来的插件稍加修改一下也可以完美胜任的，但是原作者貌似已经好久不更新了，无论是在 VS code 的插件库，还是原作者的 GitHub 库，都已经有人进行了一系列反映，甚至给出了解决方案，但是貌似作者并没有看到哈。博主又比较笨，不会修改原作者的代码，那就先这样用吧。</p>
<p>有一点比较在意的是，在很多 IDE 中，如果创建的是终端工程的话，会在程序运行结束后停留在结束界面。这点除了在代码最后调用系统命令<code>pause</code>外，没有什么好的办法。</p>
<p>但毕竟 C++不是只用来写终端程序的，这一点倒也不是很严重。</p>
<p>那就这样吧。(/・ω・＼)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/02/22/TopTenSort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/02/22/TopTenSort/" class="post-title-link" itemprop="url">十大排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-02-22 18:36:38" itemprop="dateCreated datePublished" datetime="2019-02-22T18:36:38+08:00">2019-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-07-15 11:50:37" itemprop="dateModified" datetime="2019-07-15T11:50:37+08:00">2019-07-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>从大一学 C 语言开始就一直听说有个叫做十大排序算法的东西，要涉及一些有趣的思想和数据结构什么的，听起来很厉害的样子，觉得好难就没去看过，只是调用 qsort 和 sort 之类的函数。</p>
<p>最近学一些东西的时候恰巧和十大排序打了交道，理解起来并不难，拖延了好久才去看真的挺遗憾的。然后学完后打算把十大排序总结记录下来。</p>
<p>所谓十大排序是十种比较经典，综合了很多经典思路的排序算法。分别是<strong>冒泡排序</strong>，<strong>选择排序</strong>，<strong>插入排序</strong>，<strong>希尔排序</strong>，<strong>归并排序</strong>，<strong>快速排序</strong>，<strong>堆排序</strong>，<strong>计数排序</strong>，<strong>桶排序</strong>，<strong>基数排序</strong>。</p>
<blockquote>
<p>本篇文章的动画演示录制自<span class="exturl" data-url="aHR0cHM6Ly92aXN1YWxnby5uZXQvZW4=">VisualGo<i class="fa fa-external-link-alt"></i></span>,<span class="exturl" data-url="aHR0cDovL3BhbnRoZW1hLm5ldC8yMDEzL3NvdW5kLW9mLXNvcnRpbmcv">panthema<i class="fa fa-external-link-alt"></i></span>与<span class="exturl" data-url="aHR0cHM6Ly93d3cuY3MudXNmY2EuZWR1L35nYWxsZXMvdmlzdWFsaXphdGlvbi9BbGdvcml0aG1zLmh0bWw=">USF<i class="fa fa-external-link-alt"></i></span></p>
<p>部分算法的介绍来自维基百科</p>
<p>以 C/C++混合风格实现</p>
</blockquote>
<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p><strong>冒泡排序</strong>(Bubble Sort)是一种简单的排序算法。它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。这个算法的名字由来是因为越小的元素会经由交换慢慢“浮”到数列的顶端。</p>
<p><img src="/2019/02/22/TopTenSort/BubbleSort.gif" alt="BubbleSort"></p>
<p>实现的基本思路就是两个循环嵌套起来，比较相邻元素，将大的元素逐渐后移，小的元素就逐渐浮到了前面。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BubbleSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len - i - <span class="number">1</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">array</span>[j] &gt; <span class="built_in">array</span>[j + <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                swap(<span class="built_in">array</span>[j], <span class="built_in">array</span>[j + <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><p><strong>选择排序</strong>(Selection sort)是一种简单直观的排序算法。它的工作原理如下。首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。</p>
<p>当然，也可以同时选出最大元素和最小元素，将它们分别放入两边。</p>
<p><img src="/2019/02/22/TopTenSort/SelectionSort.gif" alt="SelectionSort"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SelectionSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> minIndex = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">array</span>[j] &lt; <span class="built_in">array</span>[minIndex])</span><br><span class="line">            &#123;</span><br><span class="line">                minIndex = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(<span class="built_in">array</span>[i], <span class="built_in">array</span>[minIndex]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><p>插入排序(Insertion Sort)是一种简单直观的排序算法。它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。</p>
<p><img src="/2019/02/22/TopTenSort/InsertionSort.gif" alt="InsertionSort"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertionSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="built_in">array</span>[i];</span><br><span class="line">        <span class="keyword">int</span> j = i - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (; (j &gt;= <span class="number">0</span>) &amp;&amp; (<span class="built_in">array</span>[j] &gt; temp); j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">array</span>[j + <span class="number">1</span>] = <span class="built_in">array</span>[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">array</span>[j + <span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><p><strong>希尔排序</strong>(Shell Sort)实际上是插入排序的一种变形。插入排序在比较的时候总是和前一个进行比较然后交换，而插入排序是从一个比较大的间隔起，逐渐缩短到一。</p>
<p>经典的希尔排序在取间隔的时候设置为 n/2，n/4，n/8，在不断缩小间隔进行插入排序。</p>
<p>引用来自<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU1JUI4JThDJUU1JUIwJTk0JUU2JThFJTkyJUU1JUJBJThG">维基百科<i class="fa fa-external-link-alt"></i></span>的说法：</p>
<blockquote>
<p>假设有这样一组数[ 13 14 94 33 82 25 59 94 65 23 45 27 73 25 39 10 ]，如果我们以步长为 5 开始进行排序，我们可以通过将这列表放在有 5 列的表中来更好地描述算法，这样他们就应该看起来是这样：</p>
<blockquote>
<p>13 14 94 33 82<br>25 59 94 65 23<br>45 27 73 25 39<br>10</p>
</blockquote>
<p>然后我们对每列进行排序：</p>
<blockquote>
<p>10 14 73 25 23<br>13 27 94 33 39<br>25 59 94 65 82<br>45</p>
</blockquote>
<p>将上述四行数字，依序接在一起时我们得到：[ 10 14 73 25 23 13 27 94 33 39 25 59 94 65 82 45 ].这时 10 已经移至正确位置了，然后再以 3 为步长进行排序：</p>
<blockquote>
<p>10 14 73<br>25 23 13<br>27 94 33<br>39 25 59<br>94 65 82<br>45</p>
</blockquote>
<p>排序之后变为：</p>
<blockquote>
<p>10 14 13<br>25 23 33<br>27 25 59<br>39 65 73<br>45 94 82<br>94</p>
</blockquote>
<p>最后以 1 步长进行排序（此时就是简单的插入排序了）。</p>
</blockquote>
<p>值得一提的是虽然希尔排序的作者 <strong><em>Donald Shell</em></strong> 最初建议的间隔是(1, 2, 4, … n/2)，但是间隔的选取只要是从大到小，最后到达 1 即可。目前为止已知的效率最优秀的间隔是 <strong><em>Sedgewick</em></strong> 提出的<span class="exturl" data-url="aHR0cDovL2ZhY3VsdHkuc2ltcHNvbi5lZHUvbHlkaWEuc2luYXBvdmEvd3d3L2Ntc2MyNTAvTE4yNTBfV2Vpc3MvTDEyLVNoZWxsU29ydC5odG0jaW5jcmVtZW50cw==">(1, 5, 19, 41, 109,…)<i class="fa fa-external-link-alt"></i></span>。</p>
<p><img src="/2019/02/22/TopTenSort/ShellSort.gif" alt="ShellSort"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShellSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> gap = len &gt;&gt; <span class="number">1</span>; gap &gt; <span class="number">0</span>; gap &gt;&gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = gap; i &lt; len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = <span class="built_in">array</span>[i];</span><br><span class="line">            <span class="keyword">int</span> j = i - gap;</span><br><span class="line">            <span class="keyword">for</span> (; (j &gt;= <span class="number">0</span>) &amp;&amp; (<span class="built_in">array</span>[j] &gt; temp); j -= gap)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">array</span>[j + gap] = <span class="built_in">array</span>[j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">array</span>[j + gap] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><p><strong>归并排序</strong>(Merge Sort)是一种采取分治法进行排序的算法。在我看来可以这样理解归并排序：</p>
<ol>
<li>将两个有序数组合成一条有序数组；</li>
<li>若数组中只有一个元素则自然有序。</li>
</ol>
<p><img src="/2019/02/22/TopTenSort/MergeSort.gif" alt="MergeSort"></p>
<p>归并排序有多种实现方式，比较经常见到的有递归法和迭代法。相比而言，递归法比较容易理解。</p>
<p>对于一个长度为 n 的序列，递归方式的归并排序可以描述成：</p>
<ol>
<li>排序序列前 n/2 与后 n/2；</li>
<li>合并前后两个有序序列；</li>
<li>排序完成</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeRecursive</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> help[], <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt;= end)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> len = end - start, mid = (len &gt;&gt; <span class="number">1</span>) + start;</span><br><span class="line">    <span class="keyword">int</span> start1 = start, end1 = mid;</span><br><span class="line">    <span class="keyword">int</span> start2 = mid + <span class="number">1</span>, end2 = end;</span><br><span class="line">    MergeRecursive(<span class="built_in">array</span>, help, start1, end1); <span class="comment">//对数组前一半进行排序</span></span><br><span class="line">    MergeRecursive(<span class="built_in">array</span>, help, start2, end2); <span class="comment">//对数组后一半进行排序</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//合并两个有序数组</span></span><br><span class="line">    <span class="keyword">int</span> index = start;</span><br><span class="line">    <span class="keyword">int</span> start11 = start1, end11 = end1, start22 = start2, end22 = end2;</span><br><span class="line">    <span class="keyword">while</span> ((start1 &lt;= end1) &amp;&amp; (start2 &lt;= end2))</span><br><span class="line">    &#123;</span><br><span class="line">        help[index++] = <span class="built_in">array</span>[start1] &lt; <span class="built_in">array</span>[start2] ? <span class="built_in">array</span>[start1++] : <span class="built_in">array</span>[start2++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (start1 &lt;= end1)</span><br><span class="line">    &#123;</span><br><span class="line">        help[index++] = <span class="built_in">array</span>[start1++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (start2 &lt;= end2)</span><br><span class="line">    &#123;</span><br><span class="line">        help[index++] = <span class="built_in">array</span>[start2++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将合并后的结果复制回原数组。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= end; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">array</span>[i] = help[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *help = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">    MergeRecursive(<span class="built_in">array</span>, help, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">delete</span>[] help;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>递归法可以看作是归并排序的<strong>自顶向下</strong>的实现方式，而迭代法更多的体现的是<strong>自底向上</strong>的实现方法。</p>
<p>对于一个长度为 n 的序列，迭代方式的归并排序可以描述成：</p>
<ol>
<li>len = 1；</li>
<li>合并两两相邻的长度长度为 len 的序列；</li>
<li>len *= 2；</li>
<li>如果 len &lt; n,回到 2；</li>
<li>排序完成。</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="built_in">array</span>;</span><br><span class="line">    <span class="keyword">int</span> *help = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> dis = <span class="number">1</span>; dis &lt; len; dis *= <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> start = <span class="number">0</span>; start &lt; len; start += <span class="number">2</span> * dis)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> low = start, mid = min(start + dis, len), high = min(start + <span class="number">2</span> * dis, len);</span><br><span class="line">            <span class="keyword">int</span> start1 = start, end1 = mid;</span><br><span class="line">            <span class="keyword">int</span> start2 = mid, end2 = high;</span><br><span class="line">            <span class="keyword">int</span> index = start;</span><br><span class="line">            <span class="keyword">while</span> ((start1 &lt; end1) &amp;&amp; (start2 &lt; end2))</span><br><span class="line">            &#123;</span><br><span class="line">                help[index++] = arr[start1] &lt; arr[start2] ? arr[start1++] : arr[start2++];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (start1 &lt; end1)</span><br><span class="line">            &#123;</span><br><span class="line">                help[index++] = arr[start1++];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (start2 &lt; end2)</span><br><span class="line">            &#123;</span><br><span class="line">                help[index++] = arr[start2++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(arr, help);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arr != <span class="built_in">array</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">array</span>[i] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        help = arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] help;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我认为在迭代法中最巧妙的一步是<code>swap(arr, help)</code>，交换了原数组与辅助数组的指针，这样做让两个数组轮流做为辅助数组，省去了将辅助数组复制回原数组的开销，只在最后排完序后判断一下是否是原序列即可。相当巧妙！</p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p><strong>快速排序</strong>(Quicksort)也是一种分治的排序算法。与归并相比，快速排序更注重与划分子问题，而归并排序更注重于合并子问题，因此在具体的思路上会有较大的不同。</p>
<p>对于一个数组来讲，快速排序可以被描述成：</p>
<ol>
<li>如果数组长度小于等于 1，则排序完成；</li>
<li>选取数组中的一个元素，将所有小于该元素的元素放在数组前部分，所有大于该元素的元素放在数组后部分，该元素放在正中间；</li>
<li>对数组前一部分和后一部分进行排序；</li>
<li>排序完成。</li>
</ol>
<p><img src="/2019/02/22/TopTenSort/QuickSort.gif" alt="QuickSort"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (len &lt;= <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> low = <span class="number">1</span>, high = len - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (low &lt;= high)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">array</span>[low] &lt; <span class="built_in">array</span>[<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            low++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            swap(<span class="built_in">array</span>[low], <span class="built_in">array</span>[high--]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(<span class="built_in">array</span>[<span class="number">0</span>], <span class="built_in">array</span>[high]);</span><br><span class="line">    QuickSort(<span class="built_in">array</span>, low - <span class="number">1</span>);</span><br><span class="line">    QuickSort(<span class="built_in">array</span> + low, len - low);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>2019年7月15日更新，使用标准库实现了更优雅的写法</em></strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quicksort</span><span class="params">(ForwardIt first, ForwardIt last)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(first == last) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">auto</span> pivot = *<span class="built_in">std</span>::next(first, <span class="built_in">std</span>::distance(first,last)/<span class="number">2</span>);</span><br><span class="line">    ForwardIt middle1 = <span class="built_in">std</span>::partition(first, last, [pivot](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; em)&#123; <span class="keyword">return</span> em &lt; pivot; &#125;);</span><br><span class="line">    ForwardIt middle2 = <span class="built_in">std</span>::partition(middle1, last, [pivot](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; em)&#123; <span class="keyword">return</span> !(pivot &lt; em); &#125;);</span><br><span class="line">    quicksort(first, middle1);</span><br><span class="line">    quicksort(middle2, last);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p>堆排序(Heap Sort)是一种借助数据结构<strong>堆</strong>的性质进行排序的算法。</p>
<p>由于堆本身可以使用数组进行实现，因此可以将数组<strong>堆化</strong>成一个大顶堆或者小顶堆，不断 pop 出堆顶元素并存起来，就是排序结果(大顶堆对应升序，小顶堆对应降序)。</p>
<p>堆化：</p>
<p><img src="/2019/02/22/TopTenSort/HeapSortFirst.gif" alt="HeapSortFirst"></p>
<p>不断 pop：</p>
<p><img src="/2019/02/22/TopTenSort/HeapSortSecond.gif" alt="HeapSortSecond"></p>
<p>在实际实现过程中，数组的首元素下标为 0，所以需要对堆的实现稍微做些调整。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BuildMaxHeap</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> father, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (father &gt;= len)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> leftSon = (father &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>, rightSon = (father &lt;&lt; <span class="number">1</span>) + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (rightSon &lt; len)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">array</span>[father] &lt; max(<span class="built_in">array</span>[leftSon], <span class="built_in">array</span>[rightSon]))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">array</span>[rightSon] &gt; <span class="built_in">array</span>[leftSon])</span><br><span class="line">            &#123;</span><br><span class="line">                swap(<span class="built_in">array</span>[father], <span class="built_in">array</span>[rightSon]);</span><br><span class="line">                BuildMaxHeap(<span class="built_in">array</span>, rightSon, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                swap(<span class="built_in">array</span>[father], <span class="built_in">array</span>[leftSon]);</span><br><span class="line">                BuildMaxHeap(<span class="built_in">array</span>, leftSon, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (leftSon &lt; len)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">array</span>[leftSon] &gt; <span class="built_in">array</span>[father])</span><br><span class="line">        &#123;</span><br><span class="line">            swap(<span class="built_in">array</span>[father], <span class="built_in">array</span>[leftSon]);</span><br><span class="line">            BuildMaxHeap(<span class="built_in">array</span>, leftSon, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        BuildMaxHeap(<span class="built_in">array</span>, i, len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(<span class="built_in">array</span>[<span class="number">0</span>], <span class="built_in">array</span>[i]);</span><br><span class="line">        BuildMaxHeap(<span class="built_in">array</span>, <span class="number">0</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h2><p><strong>计数排序</strong>(Counting Sort)是一种比较暴力，但是在一定场合下，效率又非常高的排序算法。</p>
<p>就如名字中的<strong>计数</strong>一样，计数排序的本质是使用额外的辅助空间记录下一个数字出现的次数，然后按照顺序返还会原数组。计数排序特别适应于数据相对集中，重复率特别大的情况，此时计数排序的效率可以达到很高。</p>
<p><img src="/2019/02/22/TopTenSort/CountingSort.gif" alt="CountingSort"></p>
<p>在实际情况下，可以用多种方式处理负数数据，本次实现采用的是偏移的方式，将原数组的跨度映射到自 0 始的一段相同跨度的数组(有个特别神奇的操作是利用 C\C++可以使用指针的特点使用负数下标)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CountingSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> maxValue = <span class="built_in">array</span>[<span class="number">0</span>], minValue = <span class="built_in">array</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        maxValue = max(<span class="built_in">array</span>[i], maxValue);</span><br><span class="line">        minValue = min(<span class="built_in">array</span>[i], minValue);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> length = maxValue - minValue + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> *help = <span class="keyword">new</span> <span class="keyword">int</span>[length];</span><br><span class="line">    <span class="built_in">memset</span>(help, <span class="number">0</span>, (length) * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        help[<span class="built_in">array</span>[i] - minValue]++;</span><br><span class="line">    &#125;</span><br><span class="line">    ShowArray(help, length);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt;= maxValue - minValue; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (help[i]--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">array</span>[j++] = i + minValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] help;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h2><p><strong>桶排序</strong>(Bucket Sort)就有些一言难尽。</p>
<p>桶排序的具体思路是将原数组的元素在某个大小区域内的所有元素放在一个“桶”中，最后将所有的桶内元素再复制回原数组。</p>
<p><img src="/2019/02/22/TopTenSort/BucketSort.gif" alt="BucketSort"></p>
<p>因为桶内元素的具体数量并不能提前确定，因此需要使用可以灵活调整大小的数据结构来实现桶，实际实现的时候，采取了链表来实现桶。</p>
<p>桶排序的一个关键是要保证将桶内元素复制回原数组时需要保证桶内的元素一定是有序的，而实现这一点的方式有很多种，既可以在装桶的时候采取插入排序，也可以在装桶结束后使用<a href="\2019\02\11\DataStructurere-LinkedList\index.html">链表版本的归并排序</a>或者其他排序手段。</p>
<p>本次实现采取的是装桶过程中使用插入排序，并配合排序原理封装了一个简单的链表。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    Node();</span><br><span class="line">    Node(<span class="keyword">int</span> data, Node *next = <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    Node *next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Node::Node()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node::Node(<span class="keyword">int</span> data, Node *next)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;data = data;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNode</span><span class="params">(Node *head, Node *node)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *iterator = head;</span><br><span class="line">    <span class="keyword">for</span> (; iterator-&gt;next != <span class="literal">nullptr</span>; iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (iterator-&gt;next-&gt;data &gt; node-&gt;data)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    node-&gt;next = iterator-&gt;next;</span><br><span class="line">    iterator-&gt;next = node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BucketSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> maxValue = <span class="built_in">array</span>[<span class="number">0</span>], minValue = <span class="built_in">array</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        maxValue = max(maxValue, <span class="built_in">array</span>[i]);</span><br><span class="line">        minValue = min(minValue, <span class="built_in">array</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> bucketCount = <span class="number">10</span>;</span><br><span class="line">    Node *buckets = <span class="keyword">new</span> Node[bucketCount];</span><br><span class="line">    <span class="keyword">int</span> distance = (maxValue - minValue) / (bucketCount) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> index = (<span class="built_in">array</span>[i] - minValue) / distance;</span><br><span class="line">        InsertNode(buckets + index, <span class="keyword">new</span> Node(<span class="built_in">array</span>[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; bucketCount; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node *iterator = buckets[i].next; iterator != <span class="literal">nullptr</span>; iterator = buckets[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">array</span>[j++] = iterator-&gt;data;</span><br><span class="line">            buckets[i].next = iterator-&gt;next;</span><br><span class="line">            <span class="keyword">delete</span> iterator;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] buckets;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h2><p><strong>基数排序</strong>(Radix Sort)就有些意思了，它在原理上和计数排序有点类似，但是区别在于计数排序需要能容纳该数组所有元素的很多桶，而基数排序只需要十个桶，然后把元素按照每一位进行装桶，复制回原数组，再在高位装桶直到超过最大元素的位数。</p>
<p>基数排序有点像是使用桶排序对每一位进行排序后的结果。</p>
<p><img src="/2019/02/22/TopTenSort/RadixSort.gif" alt="RadixSort"></p>
<p>有一点需要注意的是，向桶内放数和从桶内取数的顺序是刚好相反的，不然会破环由低位排序而形成的相对大小关系。</p>
<p>因此，需要一种可以灵活调整大小的线性结构，可以通过一端放数而从另一端取数。</p>
<p>或许双向链表比较符合期望，但实际上使用队列会更加合适而且容易实现，因此本次实现按照排序原理封装了一个简单的队列(亦可使用 STL 中的队列)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    node(<span class="keyword">int</span> data, node *prev = <span class="literal">nullptr</span>, node *next = <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    node *prev, *next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">queue</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">queue</span>();</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> data)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    node *head;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">node::node(<span class="keyword">int</span> data, node *prev, node *next)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;data = data;</span><br><span class="line">    <span class="keyword">this</span>-&gt;prev = prev;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">queue</span>::<span class="built_in">queue</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head = <span class="keyword">new</span> node(<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;prev = <span class="keyword">this</span>-&gt;head-&gt;next = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">queue</span>::push(<span class="keyword">int</span> data)</span><br><span class="line">&#123;</span><br><span class="line">    node *temp = <span class="keyword">new</span> node(data, <span class="keyword">this</span>-&gt;head, <span class="keyword">this</span>-&gt;head-&gt;next);</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next-&gt;prev = temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">queue</span>::pop()</span><br><span class="line">&#123;</span><br><span class="line">    node *temp = <span class="keyword">this</span>-&gt;head-&gt;prev;</span><br><span class="line">    temp-&gt;prev-&gt;next = temp-&gt;next;</span><br><span class="line">    temp-&gt;next-&gt;prev = temp-&gt;prev;</span><br><span class="line">    <span class="keyword">int</span> data = temp-&gt;data;</span><br><span class="line">    <span class="keyword">delete</span> temp;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">queue</span>::empty()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;head-&gt;next == <span class="keyword">this</span>-&gt;head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">RadixSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> bucketCount = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">queue</span> *buckets = <span class="keyword">new</span> <span class="built_in">queue</span>[bucketCount];</span><br><span class="line">    <span class="keyword">int</span> maxValue = <span class="built_in">array</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        maxValue = max(maxValue, <span class="built_in">array</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> loopTime = <span class="built_in">log10</span>(maxValue);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, power = <span class="number">10</span>; i &lt;= loopTime; i++, power *= <span class="number">10</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            buckets[<span class="built_in">array</span>[j] % power / (power / <span class="number">10</span>)].push(<span class="built_in">array</span>[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, k = <span class="number">0</span>; j &lt; bucketCount; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (!buckets[j].empty())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">array</span>[k++] = buckets[j].pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] buckets;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="检测排序情况"><a href="#检测排序情况" class="headerlink" title="检测排序情况"></a>检测排序情况</h2><p>十大排序基本上就是以上的介绍了，在博主本人实际实现的过程中，为了检测排序结果是否正确，也为了调试上的方便，特地实现了一个小小的检测程序用来验证排序算法的准确性，也一并记录到最后。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">CreateArray</span><span class="params">(<span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> *ret = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">delete</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    ret = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret[i] = rand() % <span class="number">10000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">CopyArray</span><span class="params">(<span class="keyword">int</span> *<span class="built_in">array</span>, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *ret = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret[i] = <span class="built_in">array</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">CompArray</span><span class="params">(<span class="keyword">int</span> array1[], <span class="keyword">int</span> array2[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (array1[i] != array2[i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowArray</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">array</span>[i] &lt;&lt; <span class="string">","</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="comment">// srand(1);</span></span><br><span class="line">    <span class="keyword">int</span> T = rand() % <span class="number">100</span> + <span class="number">100</span>;</span><br><span class="line">    <span class="comment">// int T = 1;</span></span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// len = 5;</span></span><br><span class="line">        len = rand() % <span class="number">10</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> *<span class="built_in">array</span> = CreateArray(len);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// int array[] = &#123;3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48&#125;;</span></span><br><span class="line">        <span class="comment">// len = sizeof(array) / sizeof(array[0]);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> *temp1 = CopyArray(<span class="built_in">array</span>, len);</span><br><span class="line">        <span class="keyword">int</span> *temp2 = CopyArray(<span class="built_in">array</span>, len);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// BubbleSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// SelectionSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// InsertionSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// ShellSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// MergeSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// QuickSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// HeapSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// CountingSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// BucketSort(temp1, len);</span></span><br><span class="line">        <span class="comment">// RadixSort(temp1, len);</span></span><br><span class="line"></span><br><span class="line">        sort(temp2, temp2 + len);</span><br><span class="line">        <span class="keyword">if</span> (!CompArray(temp1, temp2, len))</span><br><span class="line">        <span class="comment">// if (true)</span></span><br><span class="line">        &#123;</span><br><span class="line">            ShowArray(<span class="built_in">array</span>, len);</span><br><span class="line">            ShowArray(temp1, len);</span><br><span class="line">            ShowArray(temp2, len);</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">delete</span> temp1;</span><br><span class="line">        <span class="keyword">delete</span> temp2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完结撒花！！<br><em>★,°</em>:.☆(￣ ▽ ￣)/$:<em>.°★</em></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/02/15/DataStructurere-Stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/02/15/DataStructurere-Stack/" class="post-title-link" itemprop="url">数据结构——堆栈</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-02-15 19:53:05" itemprop="dateCreated datePublished" datetime="2019-02-15T19:53:05+08:00">2019-02-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-02-16 15:40:35" itemprop="dateModified" datetime="2019-02-16T15:40:35+08:00">2019-02-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基本数据结构的实现/" itemprop="url" rel="index"><span itemprop="name">基本数据结构的实现</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>堆栈是一种<strong>先进后出</strong>的数据结构，我和别人说起来的时候，经常拿井做比较，最先放到井里的东西要最后才能拿出来。具体实现起来有着至少两种方式，<strong>链表实现</strong>和<strong>数组实现</strong>，实现思路都很简单，代码也都很简短。</p>
<h2 id="堆栈"><a href="#堆栈" class="headerlink" title="堆栈"></a>堆栈</h2><blockquote>
<p>以下内容摘自<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU1JUEwJTg2JUU2JUEwJTg4">维基百科<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<p><strong>堆栈</strong>（英语：stack）又称为栈或堆叠，是计算机科学中一种特殊的串列形式的抽象资料型别，其特殊之处在于只能允许在连结串列或阵列的一端（称为堆叠顶端指标，英语：<strong>top</strong>）进行加入数据（英语：<strong>push</strong>）和输出数据（英语：<strong>pop</strong>）的运算</p>
<h2 id="链表实现"><a href="#链表实现" class="headerlink" title="链表实现"></a>链表实现</h2><h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>由于拿链表实现栈，因此最小单位是节点，使用一个结构来包装节点。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElementType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> Node *Stack;</span><br></pre></td></tr></table></figure>

<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>链表实现的栈本质上是一个有头结点的链表，因此，建立一个新栈就是申请一个节点的内存。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Stack <span class="title">CreateStack</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *ret = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    ret-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><p>向栈里 push 数据的话，其实就是在链表头再加一个节点。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack <span class="built_in">stack</span>, ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *temp = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    temp-&gt;data = data;</span><br><span class="line">    temp-&gt;next = <span class="built_in">stack</span>-&gt;next;</span><br><span class="line">    <span class="built_in">stack</span>-&gt;next = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h3><p>与 push 相反，pop 是删除头节点后的第一个节点。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!Empty(<span class="built_in">stack</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        Node *temp = <span class="built_in">stack</span>-&gt;next;</span><br><span class="line">        <span class="built_in">stack</span>-&gt;next = temp-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><p>top 的话，直接取出第一个节点的值</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ElementType <span class="title">Top</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;next-&gt;data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="empty"><a href="#empty" class="headerlink" title="empty"></a>empty</h3><p>想要检查栈是否为空，可以直接检查头结点后面有没有节点。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;next == <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ElementType int</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> bool int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> true 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> false 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElementType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> Node *Stack;</span><br><span class="line"></span><br><span class="line"><span class="function">Stack <span class="title">CreateStack</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *ret = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    ret-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;next == <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack <span class="built_in">stack</span>, ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *temp = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    temp-&gt;data = data;</span><br><span class="line">    temp-&gt;next = <span class="built_in">stack</span>-&gt;next;</span><br><span class="line">    <span class="built_in">stack</span>-&gt;next = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!Empty(<span class="built_in">stack</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        Node *temp = <span class="built_in">stack</span>-&gt;next;</span><br><span class="line">        <span class="built_in">stack</span>-&gt;next = temp-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ElementType <span class="title">Top</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;next-&gt;data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组实现"><a href="#数组实现" class="headerlink" title="数组实现"></a>数组实现</h2><p>数组实现的思路有点像是做了个实实在在的井，容量有限，然后用记录下现在的元素数量，进而进行一系列操作。</p>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p>用数组实现的栈已经不是一个简单的数据类型了，需要有个数组，还需要记录长度以及当前元素数量。因此使用结构表示，出于效率的考虑，最终决定使用结构指针。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElementType *datas;</span><br><span class="line">    <span class="keyword">int</span> top;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> length;</span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> Node *Stack;</span><br></pre></td></tr></table></figure>

<h3 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h3><p>与链表创建栈不同，数组版本的栈需要为其指定一个长度，然后申请对应大小的空间，同时初始化其他的元素。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Stack <span class="title">CreateStack</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Stack <span class="built_in">stack</span> = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="built_in">stack</span>-&gt;length = length;</span><br><span class="line">    <span class="built_in">stack</span>-&gt;top = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">stack</span>-&gt;datas = (ElementType *)<span class="built_in">malloc</span>(length * <span class="keyword">sizeof</span>(ElementType));</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="push-1"><a href="#push-1" class="headerlink" title="push"></a>push</h3><p>向栈里 <strong>push</strong> 数据，相当与在数组当前记录过的元素后赋值，并更新<strong>top</strong>值。需要注意的是，此时要判断栈是否满。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack <span class="built_in">stack</span>, ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">stack</span>-&gt;top &lt; <span class="built_in">stack</span>-&gt;length)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">stack</span>-&gt;datas[++<span class="built_in">stack</span>-&gt;top] = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="pop-1"><a href="#pop-1" class="headerlink" title="pop"></a>pop</h3><p>数组版的<strong>pop</strong>只需要将<strong>top</strong>值减小就好。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!Empty(<span class="built_in">stack</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">stack</span>-&gt;top--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="top-1"><a href="#top-1" class="headerlink" title="top"></a>top</h3><p><strong>top</strong>的话，只需取出<strong>top</strong>值对应的元素即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ElementType <span class="title">Top</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;datas[<span class="built_in">stack</span>-&gt;top];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="empty-1"><a href="#empty-1" class="headerlink" title="empty"></a>empty</h3><p>只要查看 top 的值即可确定是否为空栈</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;top == <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ElementType int</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> bool int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> true 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> false 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElementType *datas;</span><br><span class="line">    <span class="keyword">int</span> top;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> length;</span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> Node *Stack;</span><br><span class="line"></span><br><span class="line"><span class="function">Stack <span class="title">CreateStack</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Stack <span class="built_in">stack</span> = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="built_in">stack</span>-&gt;length = length;</span><br><span class="line">    <span class="built_in">stack</span>-&gt;top = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">stack</span>-&gt;datas = (ElementType *)<span class="built_in">malloc</span>(length * <span class="keyword">sizeof</span>(ElementType));</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;top == <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!Empty(<span class="built_in">stack</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">stack</span>-&gt;top--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack <span class="built_in">stack</span>, ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">stack</span>-&gt;top &lt; <span class="built_in">stack</span>-&gt;length)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">stack</span>-&gt;datas[++<span class="built_in">stack</span>-&gt;top] = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ElementType <span class="title">Top</span><span class="params">(Stack <span class="built_in">stack</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">stack</span>-&gt;datas[<span class="built_in">stack</span>-&gt;top];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="模板类实现"><a href="#模板类实现" class="headerlink" title="模板类实现"></a>模板类实现</h2><p>最后贴上在 C++中包装成模板类的实现，仿照<span class="exturl" data-url="aHR0cHM6Ly96aC5jcHByZWZlcmVuY2UuY29tL3cvY3BwL2NvbnRhaW5lci9zdGFjaw==">STL 中的 stack<i class="fa fa-external-link-alt"></i></span>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    T data;</span><br><span class="line">    Node *next;</span><br><span class="line">    Node();</span><br><span class="line">    Node(T data, Node *next = <span class="literal">nullptr</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">stack</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">stack</span>();</span><br><span class="line">    <span class="function">T <span class="title">top</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(T data)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    Node&lt;T&gt; *datas;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">Node</span>&lt;T&gt;:</span>:Node(T data, Node *next)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;data = data;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">Node</span>&lt;T&gt;:</span>:Node()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">stack</span>&lt;T&gt;:</span>:<span class="built_in">stack</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;datas = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">    <span class="keyword">this</span>-&gt;length = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">T</span> <span class="title">stack</span>&lt;T&gt;:</span>:top()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>-&gt;empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;datas-&gt;next-&gt;data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">unsigned</span> <span class="title">int</span> <span class="title">stack</span>&lt;T&gt;:</span>:size()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">bool</span> <span class="title">stack</span>&lt;T&gt;:</span>:empty()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;datas-&gt;next == <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">stack</span>&lt;T&gt;:</span>:push(T data)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="keyword">new</span> Node&lt;T&gt;(data, <span class="keyword">this</span>-&gt;datas-&gt;next);</span><br><span class="line">    <span class="keyword">this</span>-&gt;datas-&gt;next = temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">stack</span>&lt;T&gt;:</span>:pop()</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="keyword">this</span>-&gt;datas-&gt;next;</span><br><span class="line">    <span class="keyword">this</span>-&gt;datas-&gt;next = temp-&gt;next;</span><br><span class="line">    <span class="keyword">delete</span> temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/02/11/DataStructurere-LinkedList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/02/11/DataStructurere-LinkedList/" class="post-title-link" itemprop="url">数据结构——链表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-02-11 12:03:17" itemprop="dateCreated datePublished" datetime="2019-02-11T12:03:17+08:00">2019-02-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-02-26 14:45:21" itemprop="dateModified" datetime="2019-02-26T14:45:21+08:00">2019-02-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基本数据结构的实现/" itemprop="url" rel="index"><span itemprop="name">基本数据结构的实现</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>数据结构是一个早就有所耳闻的东西，但是一直没有潜下心学习过，对数据结构的了解也仅限于 C++里的 STL，趁寒假有空闲，去听了浙江大学<strong>陈越</strong>老师的<span class="exturl" data-url="aHR0cDovL3d3dy5pY291cnNlMTYzLm9yZy9jb3Vyc2UvWkpVLTkzMDAx">数据结构<i class="fa fa-external-link-alt"></i></span>课程。当然，计算机领域的各种知识，只有亲自尝试了才能算是真的学得懂，因此，打算开个专题，将各个类型的数据结构都亲自实现一遍，并记录下来。</p>
<h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><blockquote>
<p>以下内容摘自<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU5JTkzJUJFJUU4JUExJUE4">维基百科<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<p><strong>链表</strong>（Linked list）是一种常见的基础数据结构，是一种线性表，但是并不会按线性的顺序存储数据，而是在每一个节点里存到下一个节点的指针(Pointer)。由于不必须按顺序存储，链表在插入的时候可以达到 O(1)的复杂度，但是查找一个节点或者访问特定编号的节点则需要 O(n)的时间。</p>
<p>使用链表结构可以克服数组链表需要预先知道数据大小的缺点，链表结构可以充分利用计算机内存空间，实现灵活的内存动态管理。但是链表失去了数组随机读取的优点，同时链表由于增加了结点的指针域，空间开销比较大。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>本次实现是拿 C 语言实现的，但是因为个人编程习惯的原因，将 int 包装成了 bool 类型并使用。多数函数采用 bool 作为返回值，用于检查是否执行成功。</p>
<h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>链表的一个很重要的特点是其结构由一些节点连接起来，各个节点是组成链表的最小单位。</p>
<p>一个节点由<strong>数据域</strong>和<strong>指针域</strong>组成，考虑用结构来表示。为表示方便，包装一个链表的数据类型。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElementType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> Node *LinkList;</span><br></pre></td></tr></table></figure>

<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>创建链表有两种基本的方式，分别是<strong>有头结点的链表</strong>和<strong>没有头结点的链表</strong>，在实际实现过程中，有头结点的链表实现起来更安全，也更加容易，因此采用有头结点的链表。</p>
<p>所以创建链表实际上就是建立了一个头结点，数据域不重要，指针域指向 NULL。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LinkList <span class="title">CreateLink</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//新建一个链表</span></span><br><span class="line">    LinkList link = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    link-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> link;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="插入节点"><a href="#插入节点" class="headerlink" title="插入节点"></a>插入节点</h3><p>在索引为<strong>index</strong>的位置插入值为<strong>data</strong>的节点。</p>
<p>假设在索引为 <strong>(index-1)</strong> 的位置有节点<strong>node1</strong>，索引为 <strong>(index)</strong> 的位置有节点<strong>node2</strong>,则<strong>node1</strong>指向<strong>node2</strong>。</p>
<p>实现的思路是先新建一个节点<strong>node3</strong>,先让<strong>node3</strong>指向<strong>node2</strong>,然后让<strong>node1</strong>指向<strong>node3</strong></p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/InsertNode.png" alt="InsertNode"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertData</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//在对应索引的位置插入节点</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; iterator; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Node *node = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">            <span class="keyword">if</span> (node)</span><br><span class="line">            &#123;</span><br><span class="line">                node-&gt;data = data;</span><br><span class="line">                node-&gt;next = iterator-&gt;next;</span><br><span class="line">                iterator-&gt;next = node;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h3><p>删除索引为<strong>index</strong>的节点。</p>
<p>假设有连续三个节点<strong>node1</strong>，<strong>node2</strong>，<strong>node3</strong>，想要删除<strong>node2</strong>节点，只需要让<strong>node1</strong>的指针域指向<strong>node3</strong>，然后回收<strong>node2</strong>节点的内存即可。</p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/DeleteNode.png" alt="DeleteNode"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DeleteDataByIndex</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//删除对应索引的的节点</span></span><br><span class="line">    Node *beforeIterator = linkList;</span><br><span class="line">    Node *deleteIterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; deleteIterator; i++, beforeIterator = deleteIterator, deleteIterator = deleteIterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index)</span><br><span class="line">        &#123;</span><br><span class="line">            beforeIterator-&gt;next = deleteIterator-&gt;next;</span><br><span class="line">            <span class="built_in">free</span>(deleteIterator);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改节点"><a href="#修改节点" class="headerlink" title="修改节点"></a>修改节点</h3><p>修改索引为<strong>index</strong>的节点值为<strong>data</strong>。</p>
<p>基本思路来就是定位到索引的位置，然后修改具体的值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ChangeDataByIndex</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//修改索引对应的节点</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; iterator; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index)</span><br><span class="line">        &#123;</span><br><span class="line">            iterator-&gt;data = data;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="反转"><a href="#反转" class="headerlink" title="反转"></a>反转</h3><p>反转整条链表。</p>
<p>最开始我以为实现这个的做法改成双向链表，然后做标记，但后来才了解到,的确是一条单向链表的反转,而且实现过程相当巧妙。</p>
<p>基本思路是：</p>
<pre><code>1. 用三个指针记录下连续的三个节点地址
2. 修改第二个节点的next使其指向第一个节点
3. 三个指针后移
4. 如果没有到达末尾，返回1
5. 修改头指针和第一个节点的next
6. 反转结束</code></pre><p>不过要注意的是，节点数较少时要做特殊处理。</p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/Reverse_1.png" alt="Reverse"></p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/Reverse_2.png" alt="Reverse"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReverseLink</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//反转链表</span></span><br><span class="line">    Node *first = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">if</span> (!first || !first-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *second = first-&gt;next;</span><br><span class="line">    <span class="keyword">if</span> (!second-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        linkList-&gt;next = second;</span><br><span class="line">        second-&gt;next = first;</span><br><span class="line">        first-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *third = second-&gt;next;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        second-&gt;next = first;</span><br><span class="line">        first = second;</span><br><span class="line">        second = third;</span><br><span class="line">        <span class="keyword">if</span> (!third)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        third = third-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    linkList-&gt;next-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    linkList-&gt;next = first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>将整条链排序</p>
<p>emm…，学习过之后才发现链表竟然如此神奇，本来我以为链表只能访问相邻的元素顶多就冒泡排序了。</p>
<p>结果，至少可以冒泡、选择、插入、快排、归并、希尔、堆排序等等……</p>
<p><a href="\2019\02\22\TopTenSort\index.html">十大排序</a>都可以用得上눈_눈</p>
<p>先贴上一位<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vVGVub3NEb0l0L3AvMzY2NjU4NS5odG1s">大佬的文章<i class="fa fa-external-link-alt"></i></span>，本次排序的实现正是基于此篇文章。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vVGVub3NEb0l0L3AvMzY2NjU4NS5odG1s">点击前往大佬的文章<i class="fa fa-external-link-alt"></i></span></p>
<p>采取的是<strong>归并排序</strong>，这应该是<strong>最适合链表</strong>的排序方式了。</p>
<p>归并排序的第一步是将整个链表从中间分开，我当时还在想怎么可能定位到正中间，然后就被惊艳了。</p>
<p>定位的方法是<strong>快慢指针法</strong>，简单地说，使用两根指针同时从头出发，慢指针每次前进一个节点，快指针每次前进两个节点，这样，当快指针到达末尾的时候，慢指针差不多到达了一半的位置。</p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/QuickSlowPoint_1.png" alt="QuickSlow"></p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/QuickSlowPoint_2.png" alt="QuickSlow"></p>
<p>当定位到中点后，将一条链表劈成两半，分别递归排序两端链表(为了排序方便，使用<strong>没有头结点的链表</strong>)。</p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/Slider.png" alt="Slider"></p>
<blockquote>
<p>如果链表只有一个节点则自然有序</p>
</blockquote>
<p>最后，将两条排好序的链表归并连接起来。相较于数组的归并排序，链表结构的独特性使得完全不用开辟额外空间。</p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/Merge_1.png" alt="Merge"></p>
<p><img src="/2019/02/11/DataStructurere-LinkedList/Merge_2.png" alt="Merge"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SortLink</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//排序链表</span></span><br><span class="line">    <span class="comment">//预处理成没有头结点的链表</span></span><br><span class="line">    linkList-&gt;next = MergeSort(linkList-&gt;next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node *<span class="title">MergeSort</span><span class="params">(Node *begin)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//归并排序</span></span><br><span class="line">    Node *fast = begin, *slow = begin;</span><br><span class="line">    <span class="keyword">if</span> (begin == <span class="literal">NULL</span> || begin-&gt;next == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> begin;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (fast-&gt;next &amp;&amp; fast-&gt;next-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        slow = slow-&gt;next;</span><br><span class="line">        fast = fast-&gt;next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    fast = slow;</span><br><span class="line">    fast-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    slow = slow-&gt;next;</span><br><span class="line">    fast = MergeSort(begin);</span><br><span class="line">    slow = MergeSort(slow);</span><br><span class="line">    <span class="keyword">return</span> Merge(fast, slow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node *<span class="title">Merge</span><span class="params">(Node *first, Node *second)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//合并两链表</span></span><br><span class="line">    Node *ret = <span class="literal">NULL</span>;</span><br><span class="line">    Node *iterator = ret;</span><br><span class="line">    <span class="keyword">while</span> (first &amp;&amp; second)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (first-&gt;data &lt; second-&gt;data)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (iterator)</span><br><span class="line">            &#123;</span><br><span class="line">                iterator-&gt;next = first;</span><br><span class="line">                iterator = iterator-&gt;next;</span><br><span class="line">                first = first-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ret = first;</span><br><span class="line">                iterator = first;</span><br><span class="line">                first = first-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (iterator)</span><br><span class="line">            &#123;</span><br><span class="line">                iterator-&gt;next = second;</span><br><span class="line">                iterator = iterator-&gt;next;</span><br><span class="line">                second = second-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ret = second;</span><br><span class="line">                iterator = second;</span><br><span class="line">                second = second-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first)</span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next = first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next = second;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>除此之外，再加一些简单的函数，全部代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ElementType int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Out <span class="meta-string">"%d"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> bool int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> true 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> false 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElementType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> Node *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="function">LinkList <span class="title">CreateLink</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//新建一个链表</span></span><br><span class="line">    LinkList link = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    link-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> link;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">AddDataAtLast</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//在链表末尾增加一个节点</span></span><br><span class="line">    Node *last = linkList;</span><br><span class="line">    <span class="keyword">while</span> (last-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        last = last-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    last-&gt;next = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="keyword">if</span> ((last = last-&gt;next))</span><br><span class="line">    &#123;</span><br><span class="line">        last-&gt;data = data;</span><br><span class="line">        last-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">AddDataAtBegin</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//在链表起始增加一个节点</span></span><br><span class="line">    Node *begin = linkList;</span><br><span class="line">    Node *node = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="keyword">if</span> (node)</span><br><span class="line">    &#123;</span><br><span class="line">        node-&gt;data = data;</span><br><span class="line">        node-&gt;next = begin-&gt;next;</span><br><span class="line">        begin-&gt;next = node;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertData</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//在对应索引的位置插入节点</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; iterator; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Node *node = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">            <span class="keyword">if</span> (node)</span><br><span class="line">            &#123;</span><br><span class="line">                node-&gt;data = data;</span><br><span class="line">                node-&gt;next = iterator-&gt;next;</span><br><span class="line">                iterator-&gt;next = node;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DeleteDataByIndex</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//删除对应索引的的节点</span></span><br><span class="line">    Node *beforeIterator = linkList;</span><br><span class="line">    Node *deleteIterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; deleteIterator; i++, beforeIterator = deleteIterator, deleteIterator = deleteIterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index)</span><br><span class="line">        &#123;</span><br><span class="line">            beforeIterator-&gt;next = deleteIterator-&gt;next;</span><br><span class="line">            <span class="built_in">free</span>(deleteIterator);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DeleteDataByValue</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//删除该值第一次出现的结点</span></span><br><span class="line">    Node *beforeIterator = linkList;</span><br><span class="line">    Node *deleteIterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">for</span> (; deleteIterator; beforeIterator = deleteIterator, deleteIterator = deleteIterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (deleteIterator-&gt;data == data)</span><br><span class="line">        &#123;</span><br><span class="line">            beforeIterator-&gt;next = deleteIterator-&gt;next;</span><br><span class="line">            <span class="built_in">free</span>(deleteIterator);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ChangeDataByIndex</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index, <span class="keyword">const</span> ElementType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//修改索引对应的节点</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; iterator; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index)</span><br><span class="line">        &#123;</span><br><span class="line">            iterator-&gt;data = data;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">TryFindDataByValue</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">const</span> ElementType data, <span class="keyword">int</span> *index)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//查找该值第一次出现的节点的索引</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">for</span> ((*index) = <span class="number">0</span>; linkList; (*index)++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (iterator-&gt;data == data)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    (*index) = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">TryFindDataByIndex</span><span class="params">(<span class="keyword">const</span> LinkList linkList, <span class="keyword">unsigned</span> <span class="keyword">const</span> <span class="keyword">int</span> index, ElementType *data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//根据索引查找对应的值</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; iterator; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index)</span><br><span class="line">        &#123;</span><br><span class="line">            (*data) = iterator-&gt;data;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReverseLink</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//反转链表</span></span><br><span class="line">    Node *first = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">if</span> (!first || !first-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *second = first-&gt;next;</span><br><span class="line">    <span class="keyword">if</span> (!second-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        linkList-&gt;next = second;</span><br><span class="line">        second-&gt;next = first;</span><br><span class="line">        first-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *third = second-&gt;next;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        second-&gt;next = first;</span><br><span class="line">        first = second;</span><br><span class="line">        second = third;</span><br><span class="line">        <span class="keyword">if</span> (!third)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        third = third-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    linkList-&gt;next-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    linkList-&gt;next = first;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SortLink</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//排序链表</span></span><br><span class="line">    <span class="comment">//预处理成没有头结点的链表</span></span><br><span class="line">    linkList-&gt;next = MergeSort(linkList-&gt;next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node *<span class="title">MergeSort</span><span class="params">(Node *begin)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//归并排序</span></span><br><span class="line">    Node *fast = begin, *slow = begin;</span><br><span class="line">    <span class="keyword">if</span> (begin == <span class="literal">NULL</span> || begin-&gt;next == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> begin;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (fast-&gt;next &amp;&amp; fast-&gt;next-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        slow = slow-&gt;next;</span><br><span class="line">        fast = fast-&gt;next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    fast = slow;</span><br><span class="line">    slow = slow-&gt;next;</span><br><span class="line">    fast-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    fast = MergeSort(begin);</span><br><span class="line">    slow = MergeSort(slow);</span><br><span class="line">    <span class="keyword">return</span> Merge(fast, slow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node *<span class="title">Merge</span><span class="params">(Node *first, Node *second)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//合并两链表</span></span><br><span class="line">    Node *ret = <span class="literal">NULL</span>;</span><br><span class="line">    Node *iterator = ret;</span><br><span class="line">    <span class="keyword">while</span> (first &amp;&amp; second)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (first-&gt;data &lt; second-&gt;data)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (iterator)</span><br><span class="line">            &#123;</span><br><span class="line">                iterator-&gt;next = first;</span><br><span class="line">                iterator = iterator-&gt;next;</span><br><span class="line">                first = first-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ret = first;</span><br><span class="line">                iterator = first;</span><br><span class="line">                first = first-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (iterator)</span><br><span class="line">            &#123;</span><br><span class="line">                iterator-&gt;next = second;</span><br><span class="line">                iterator = iterator-&gt;next;</span><br><span class="line">                second = second-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ret = second;</span><br><span class="line">                iterator = second;</span><br><span class="line">                second = second-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first)</span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next = first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next = second;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">LinkLength</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//返回链表的长度</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; iterator; i++, iterator = iterator-&gt;next)</span><br><span class="line">        ;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowLink</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//展示链表</span></span><br><span class="line">    Node *iterator = linkList-&gt;next;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Head =&gt; "</span>);</span><br><span class="line">    <span class="keyword">while</span> (iterator)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(Out <span class="string">" =&gt; "</span>, iterator-&gt;data);</span><br><span class="line">        iterator = iterator-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"NULL\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearLink</span><span class="params">(<span class="keyword">const</span> LinkList linkList)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//清空链表</span></span><br><span class="line">    <span class="keyword">if</span> (linkList-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        ClearLink(linkList-&gt;next);</span><br><span class="line">        <span class="built_in">free</span>(linkList-&gt;next);</span><br><span class="line">        linkList-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>留个空白，之后拿 C++封装成类再实现一遍。😁</p>
<hr>
<h2 id="模板类实现"><a href="#模板类实现" class="headerlink" title="模板类实现"></a>模板类实现</h2><blockquote>
<p>2019 年 2 月 15 日更新</p>
</blockquote>
<p>模仿<span class="exturl" data-url="aHR0cHM6Ly96aC5jcHByZWZlcmVuY2UuY29tL3cvY3BwL2NvbnRhaW5lci9saXN0">STL 里的 List<i class="fa fa-external-link-alt"></i></span>写的方法，为了实现一些功能硬是把单链表写成了双向链表，加上了头尾指针，心累 o(T ヘ To)，一些琐碎的细节折磨了很久(才没有去刷知乎(,,• ₃ •,,))，一天终于实现了，代码如下。(虽然还是有不安全的问题吧……</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    Node();</span><br><span class="line">    Node(T data, Node *prev = <span class="literal">nullptr</span>, Node *next = <span class="literal">nullptr</span>);</span><br><span class="line">    T data;</span><br><span class="line">    Node *next, *prev;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">Node</span>&lt;T&gt;:</span>:Node()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;prev = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">Node</span>&lt;T&gt;:</span>:Node(T data, Node *prev, Node *next)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;data = data;</span><br><span class="line">    <span class="keyword">this</span>-&gt;prev = prev;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">LinkList</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    LinkList();</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">front</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">T <span class="title">back</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> index, T data)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push_front</span><span class="params">(T data)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push_back</span><span class="params">(T data)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop_front</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop_back</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    Node&lt;T&gt; *head, *tail;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> length;</span><br><span class="line">    Node&lt;T&gt; *MergeSort(Node&lt;T&gt; *begin);</span><br><span class="line">    Node&lt;T&gt; *Merge(Node&lt;T&gt; *first, Node&lt;T&gt; *second);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">LinkList</span>&lt;T&gt;:</span>:LinkList()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">    <span class="keyword">this</span>-&gt;tail = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next = tail;</span><br><span class="line">    <span class="keyword">this</span>-&gt;tail-&gt;prev = head;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">T</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:front()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;head-&gt;next-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">T</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:back()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;tail-&gt;prev-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">bool</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:empty()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;head-&gt;next == tail;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">unsigned</span> <span class="title">int</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:size()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:clear()</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">for</span> (Node&lt;T&gt; *iterator = <span class="keyword">this</span>-&gt;head-&gt;next; iterator != <span class="keyword">this</span>-&gt;tail;)</span><br><span class="line">    &#123;</span><br><span class="line">        temp = iterator;</span><br><span class="line">        iterator = iterator-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next = <span class="keyword">this</span>-&gt;tail;</span><br><span class="line">    <span class="keyword">this</span>-&gt;tail-&gt;prev = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:insert(<span class="keyword">int</span> index, T data)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *iterator = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; iterator != <span class="keyword">this</span>-&gt;tail; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Node&lt;T&gt; *prev = iterator;</span><br><span class="line">            Node&lt;T&gt; *next = iterator-&gt;next;</span><br><span class="line">            Node&lt;T&gt; *temp = <span class="keyword">new</span> Node&lt;T&gt;(data, prev, next);</span><br><span class="line">            prev-&gt;next = temp;</span><br><span class="line">            next-&gt;prev = temp;</span><br><span class="line">            <span class="keyword">this</span>-&gt;length++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:erase(<span class="keyword">int</span> index)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *iterator = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; iterator != <span class="keyword">this</span>-&gt;tail; i++, iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == index)</span><br><span class="line">        &#123;</span><br><span class="line">            Node&lt;T&gt; *prev = iterator-&gt;prev;</span><br><span class="line">            Node&lt;T&gt; *next = iterator-&gt;next;</span><br><span class="line">            prev-&gt;next = next;</span><br><span class="line">            next-&gt;prev = prev;</span><br><span class="line">            <span class="keyword">delete</span> iterator;</span><br><span class="line">            <span class="keyword">this</span>-&gt;length--;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:push_front(T data)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="keyword">new</span> Node&lt;T&gt;(data, <span class="keyword">this</span>-&gt;head, <span class="keyword">this</span>-&gt;head-&gt;next);</span><br><span class="line">    temp-&gt;prev-&gt;next = temp;</span><br><span class="line">    temp-&gt;next-&gt;prev = temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:push_back(T data)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="keyword">new</span> Node&lt;T&gt;(data, <span class="keyword">this</span>-&gt;tail-&gt;prev, <span class="keyword">this</span>-&gt;tail);</span><br><span class="line">    temp-&gt;prev-&gt;next = temp;</span><br><span class="line">    temp-&gt;next-&gt;prev = temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:pop_front()</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">    temp-&gt;prev-&gt;next = temp-&gt;next;</span><br><span class="line">    temp-&gt;next-&gt;prev = temp-&gt;prev;</span><br><span class="line">    <span class="keyword">delete</span> temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:pop_back()</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *temp = <span class="keyword">this</span>-&gt;tail-&gt;prev;</span><br><span class="line">    temp-&gt;prev-&gt;next = temp-&gt;next;</span><br><span class="line">    temp-&gt;next-&gt;prev = temp-&gt;prev;</span><br><span class="line">    <span class="keyword">delete</span> temp;</span><br><span class="line">    <span class="keyword">this</span>-&gt;length--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:reverse()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;length == <span class="number">0</span> || <span class="keyword">this</span>-&gt;length == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;length == <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        T temp = <span class="keyword">this</span>-&gt;head-&gt;next-&gt;data;</span><br><span class="line">        <span class="keyword">this</span>-&gt;head-&gt;next-&gt;data = <span class="keyword">this</span>-&gt;tail-&gt;prev-&gt;data;</span><br><span class="line">        <span class="keyword">this</span>-&gt;tail-&gt;prev-&gt;data = temp;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node&lt;T&gt; *first = head-&gt;next;</span><br><span class="line">    Node&lt;T&gt; *second = first-&gt;next;</span><br><span class="line">    Node&lt;T&gt; *third = second-&gt;next;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        second-&gt;next = first;</span><br><span class="line">        first-&gt;prev = second;</span><br><span class="line">        first = second;</span><br><span class="line">        second = third;</span><br><span class="line">        <span class="keyword">if</span> (third == <span class="keyword">this</span>-&gt;tail)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        third = third-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next-&gt;next = <span class="keyword">this</span>-&gt;tail;</span><br><span class="line">    <span class="keyword">this</span>-&gt;tail-&gt;prev = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next = first;</span><br><span class="line">    first-&gt;prev = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">LinkList</span>&lt;T&gt;:</span>:sort()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head-&gt;next = MergeSort(head-&gt;next);</span><br><span class="line">    <span class="keyword">for</span> (Node&lt;T&gt; *iterator = <span class="keyword">this</span>-&gt;head; iterator-&gt;next; iterator = iterator-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next-&gt;prev = iterator;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">Node</span>&lt;T&gt; *<span class="title">LinkList</span>&lt;T&gt;:</span>:MergeSort(Node&lt;T&gt; *begin)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *fast = begin, *slow = begin;</span><br><span class="line">    <span class="keyword">if</span> (begin == <span class="keyword">this</span>-&gt;tail || begin-&gt;next == <span class="keyword">this</span>-&gt;tail)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> begin;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (fast-&gt;next != <span class="keyword">this</span>-&gt;tail &amp;&amp; fast-&gt;next-&gt;next != <span class="keyword">this</span>-&gt;tail)</span><br><span class="line">    &#123;</span><br><span class="line">        slow = slow-&gt;next;</span><br><span class="line">        fast = fast-&gt;next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    fast = slow;</span><br><span class="line">    slow = slow-&gt;next;</span><br><span class="line">    fast-&gt;next = <span class="keyword">this</span>-&gt;tail;</span><br><span class="line">    fast = MergeSort(begin);</span><br><span class="line">    slow = MergeSort(slow);</span><br><span class="line">    <span class="keyword">return</span> Merge(fast, slow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">Node</span>&lt;T&gt; *<span class="title">LinkList</span>&lt;T&gt;:</span>:Merge(Node&lt;T&gt; *first, Node&lt;T&gt; *second)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt; *ret = <span class="literal">nullptr</span>;</span><br><span class="line">    Node&lt;T&gt; *iterator = ret;</span><br><span class="line">    <span class="keyword">while</span> (first != <span class="keyword">this</span>-&gt;tail &amp;&amp; second != <span class="keyword">this</span>-&gt;tail)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (first-&gt;data &lt; second-&gt;data)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (iterator)</span><br><span class="line">            &#123;</span><br><span class="line">                iterator-&gt;next = first;</span><br><span class="line">                iterator = iterator-&gt;next;</span><br><span class="line">                first = first-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ret = first;</span><br><span class="line">                iterator = first;</span><br><span class="line">                first = first-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (iterator)</span><br><span class="line">            &#123;</span><br><span class="line">                iterator-&gt;next = second;</span><br><span class="line">                iterator = iterator-&gt;next;</span><br><span class="line">                second = second-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ret = second;</span><br><span class="line">                iterator = second;</span><br><span class="line">                second = second-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first != <span class="keyword">this</span>-&gt;tail)</span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next = first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        iterator-&gt;next = second;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/02/10/AlgorithmIsBeautifulul-SearchSortUp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/02/10/AlgorithmIsBeautifulul-SearchSortUp/" class="post-title-link" itemprop="url">《算法很美》——查找与排序（上）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-02-10 21:06:29" itemprop="dateCreated datePublished" datetime="2019-02-10T21:06:29+08:00">2019-02-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-02-22 18:36:13" itemprop="dateModified" datetime="2019-02-22T18:36:13+08:00">2019-02-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/《算法很美》/" itemprop="url" rel="index"><span itemprop="name">《算法很美》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>第二章的内容相对第一章来说常规了一些，或者更应该说第一章的内容很是惊艳，毕竟位运算接触的少。而第二章分析算法的复杂度，排序算法的实现，二分查找这些就中规中矩了许多，在意的并不多。但是在例题里有几道感觉特别有意思的题目，思路比较巧，因此决定记下来。</p>
<h2 id="设计一个高效的-pow-函数"><a href="#设计一个高效的-pow-函数" class="headerlink" title="设计一个高效的 pow 函数"></a>设计一个高效的 pow 函数</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>设计一个高效的求 a 的 n 次幂的算法，n 为正整数</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这个题最朴素的思路自然是<strong>连续乘法</strong>，让 a 循环乘 n 次，即：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret *= a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>教学过程中老师又提出了一种解法。</p>
<p>考虑到如果一个数和自己相乘，结果再和自己相乘，结果再乘，这样每次计算时所得的计算结果就会是原数的<strong>1,2,4,8,16,32</strong>次方，与连续乘的<strong>1,2,3,4,5</strong>相比快很多。当然，因为不连续的问题，会导致循环时有可能会跳过期望的 n，则可以将不足 n 的部分拿出单独按照同样的方法求。</p>
<p>任何一个十进制整数都可以被写成是二进制数，因此上述解法一定可以将 n 分解为若干个 2 的次幂相加，因此，该解法是正确无误的：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = a;</span><br><span class="line">    <span class="keyword">int</span> ex = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>((ex&lt;&lt;<span class="number">1</span>)&lt;=n)</span><br><span class="line">    &#123;</span><br><span class="line">        res = res * res;</span><br><span class="line">        ex &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res * <span class="built_in">pow</span>(a, n - ex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只不过，看着这个解法，我总觉得还是有点不对劲。如果把 n 看作是 100，那么该解法相当于是分别求了<strong>n = 64</strong>，<strong>n = 32</strong>，<strong>n = 4</strong>时的情况，并将它们相乘，结果正确无误。</p>
<p>可是，在计算<strong>n = 64</strong>时，实际上是算过了<strong>n = 32</strong>以及<strong>n = 4</strong>的值，只是没有将它们用上而已，如此一来，这个解法应该还有继续优化的空间。</p>
<p>那么，如果可以将这个 n 分解开为若干个<strong>2 的次幂和</strong>的形式，然后在相乘的过程中遇见了这些次幂的情况就乘进结果中，最后再返回，那会不会就让整个过程更快了？</p>
<p>那么，如何将一个 n 拆分成若干个 2 的次幂和的形式并将其记录下来呢？</p>
<p>实际上，这一步计算机已经帮我们做好了。任意一个正整数数都可以被写成是二进制的形式，而计算机再内部储存数的时候采取的就是二进制。而二进制的每一位都有对应的权值，这些位上的数与它们的权值相乘求和就会得到所表达的二进制数。</p>
<p>也就是说，计算机在内部的二进制表示形式实际上就是我们希望的拆分并记录下的若干个 2 的次幂和的形式。</p>
<p>那么，接下来借用一下<a href="\2019\02\07\AlgorithmIsBeautifulul-BitwiseOperation\index.html">位运算</a>的技巧，就可以写出解法。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> power = a; n; n &gt;&gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &amp; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ret *= power;</span><br><span class="line">        &#125;</span><br><span class="line">        power *= power;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完美！(•̀ᴗ•́)و ̑̑</p>
<h2 id="走楼梯"><a href="#走楼梯" class="headerlink" title="走楼梯"></a>走楼梯</h2><h3 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h3><pre><code>小明刚刚看完电影《第K级台阶》，离开电影院的时候，他数了数礼堂前的台阶数，恰好是K级!

站在台阶前，他突然又想着一个问题：

如果我每一步只能迈上1个或2个台阶。先迈左脚，然后左右交替，最后一步是迈右脚，

也就是说一共要走偶数步。那么，上完K级台阶，有多少种不同的上法呢？

请你利用计算机的优势，帮助小明寻找答案。</code></pre><h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>这道题有点<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JTk2JTkwJUU2JUIzJUEyJUU5JTgyJUEzJUU1JUE1JTkxJUU2JTk1JUIwJUU1JTg4JTk3">斐波那契数列<i class="fa fa-external-link-alt"></i></span>的感觉，但是加了一个条件，即考虑左右交替。</p>
<p>那么首先最朴素的想法就来了，和斐波那契数列一样，最简单的想法，第 n 阶偶数的方法数是第 n-1 阶奇数方法数与第 n-2 阶奇数的方法数之和，奇数同理，那么自然就有了如下的递归解法。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> num, <span class="keyword">int</span> ou)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">0</span> &amp;&amp; (ou % <span class="number">2</span> == <span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        num++;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; <span class="number">0</span> || (k == <span class="number">0</span> &amp;&amp; ou % <span class="number">2</span>))</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    num = dfs(k - <span class="number">1</span>, num, ou + <span class="number">1</span>);</span><br><span class="line">    num = dfs(k - <span class="number">2</span>, num, ou + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; dfs(a, <span class="number">0</span>, <span class="number">0</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>稍加改进</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">bool</span> even)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((k == <span class="number">1</span> &amp;&amp; even) || k == <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; <span class="number">1</span> || (k == <span class="number">1</span> &amp;&amp; !even))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dfs(k - <span class="number">1</span>, !even) + dfs(k - <span class="number">2</span>, !even);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; dfs(a, <span class="literal">false</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>欸，好像有点眼熟(○´･д･)ﾉ</p>
<p>如果把</p>
<p><code>return dfs(k - 1, !even) + dfs(k - 2, !even)</code></p>
<p>单独拿出来的话，不就是</p>
<p><code>dfs(k,even)=dfs(k - 1, !even) + dfs(k - 2, !even)</code></p>
<p>了嘛，如果再加上初始条件和记录的数组的话。</p>
<p><code>all[i][j] = all[i - 1][!j] + all[i - 2][!j]</code></p>
<p>和斐波那契数列好像哦</p>
<p><code>Fib[i] = Fib[i-1] + Fib[i - 2]</code></p>
<p>所以这道题实际上是动态规划 🤣，状态转移方程就是之前写下的样子。</p>
<p>改为动态规划后的代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> all[maxn][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Left = <span class="number">0</span>, Right = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Impossible = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    all[<span class="number">1</span>][Left] = <span class="number">1</span>;</span><br><span class="line">    all[<span class="number">2</span>][Left] = <span class="number">1</span>;</span><br><span class="line">    all[<span class="number">1</span>][Right] = Impossible;</span><br><span class="line">    all[<span class="number">2</span>][Right] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt; maxn; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = Left; j &lt;= Right; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (all[i - <span class="number">1</span>][!j] != Impossible)</span><br><span class="line">            &#123;</span><br><span class="line">                all[i][j] += all[i - <span class="number">1</span>][!j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (all[i - <span class="number">2</span>][!j] != Impossible)</span><br><span class="line">            &#123;</span><br><span class="line">                all[i][j] += all[i - <span class="number">2</span>][!j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!all[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                all[i][j] = Impossible;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; all[k][Right] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好吧，这是我第一次看出来是动态规划并且推出状态转移方程的题，所以拿出来纪念下(｡◕ˇ∀ˇ◕）。</p>
<p>就写这么多吧，剩下的内容感觉比较简单就不写了。😁</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/" class="post-title-link" itemprop="url">《算法很美》——位运算的奇巧淫技</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-02-07 11:58:11" itemprop="dateCreated datePublished" datetime="2019-02-07T11:58:11+08:00">2019-02-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-02-10 21:07:32" itemprop="dateModified" datetime="2019-02-10T21:07:32+08:00">2019-02-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/《算法很美》/" itemprop="url" rel="index"><span itemprop="name">《算法很美》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>寒假前报名了蓝桥杯，和同学一起参加了蓝桥杯 《<strong>算法很美</strong>》的课程，于是开了个新坑，学习一些基本的算法知识。</p>
<h2 id="位操作"><a href="#位操作" class="headerlink" title="位操作"></a>位操作</h2><blockquote>
<p>摘自<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU0JUJEJThEJUU2JTkzJThEJUU0JUJEJTlD">维基百科<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<h3 id="取反-NOT"><a href="#取反-NOT" class="headerlink" title="取反(NOT)"></a>取反(NOT)</h3><p><strong>取反</strong>是一元运算符，对一个个二进制数的每一位执行逻辑反操作，是数字1成为0，数字0成为1。例如：</p>
<blockquote>
<p>NOT 0111 = 1000</p>
</blockquote>
<p>在C/C++程序设计语言中，取反操作通过波浪线“<strong>~</strong>”来表示。</p>
<h3 id="按位或-OR"><a href="#按位或-OR" class="headerlink" title="按位或(OR)"></a>按位或(OR)</h3><p><strong>按位或</strong>处理两个长度相同的二进制数，两个相应的二进位中只要有一个为1，该位的结果值为1。例如：</p>
<blockquote>
<p>0010 OR 1000 = 1010</p>
</blockquote>
<p>在C/C++程序设计语言中，按位或操作通过单竖线“<strong>|</strong>”来表示。</p>
<h3 id="按位异或-XOR"><a href="#按位异或-XOR" class="headerlink" title="按位异或(XOR)"></a>按位异或(XOR)</h3><p><strong>按位异或</strong>对等长二进制模式或二进制数的每一位执行逻辑异或操作。操作结果是如果某位不同则改为为1，否则改为为0。例如：</p>
<blockquote>
<p>0101 XOR 0011 = 0110</p>
</blockquote>
<p>在C/C++程序设计语言中，按位异或的运算符是“<strong>^</strong>”。</p>
<h3 id="按位与-AND"><a href="#按位与-AND" class="headerlink" title="按位与(AND)"></a>按位与(AND)</h3><p><strong>按位与</strong>处理两个长度相同的二进制数，两个相应的二进位都为1，改为的结果值才为1，否则为0。例如：</p>
<blockquote>
<p>0101 AND 0011 = 0001</p>
</blockquote>
<p>在C/C++程序设计语言中，按位与的运算符是“<strong>&amp;</strong>”。</p>
<h3 id="移位"><a href="#移位" class="headerlink" title="移位"></a>移位</h3><p><strong>移位</strong>是一个二元运算符，用来将一个二进制数的每一位全部都向一个方向移动指定为，溢出的部分将被舍弃，而孔雀的部分填入0。例如：</p>
<blockquote>
<p>0001 &lt;&lt; 3 = 1000</p>
<p>1010 &gt;&gt; 2 = 0010</p>
</blockquote>
<p>在C/C++程序设计语言中，移位的运算符是“<strong>&lt;&lt;</strong>”与“<strong>&gt;&gt;</strong>”。</p>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="1-判断奇偶数"><a href="#1-判断奇偶数" class="headerlink" title="1. 判断奇偶数"></a>1. 判断奇偶数</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><p>任给一个整数n，判断该数是否为奇数。</p>
<h4 id="定义判断"><a href="#定义判断" class="headerlink" title="定义判断"></a>定义判断</h4><ul>
<li><strong>可以被2整除的数是偶数，不可被2整除的数是奇数</strong></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsOdd</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用位运算“-amp-”"><a href="#使用位运算“-amp-”" class="headerlink" title="使用位运算“&amp;”"></a>使用位运算“&amp;”</h4><ul>
<li><strong>奇数的二进制形式最后一位是1，偶数则为0</strong></li>
<li><strong>按位与处理两个长度相同的二进制数，两个相应的二进位都为1，改为的结果值才为1，否则为0</strong></li>
</ul>
<p>因此，任意一个整数<strong>n</strong>与整数<strong>1</strong>进行<strong>与</strong>操作时，若n二进制形式最低为为1则结果为1，否则为0。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsOdd</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &amp; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序"><a href="#验证程序" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsOdd</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入一个整数:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span> (IsOdd(n))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="string">"是奇数。"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="string">"不是奇数。"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-找出唯一成对的数"><a href="#2-找出唯一成对的数" class="headerlink" title="2.找出唯一成对的数"></a>2.找出唯一成对的数</h3><h4 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h4><p>1-n这n个数放在含有(n+1)个元素的数组中，只有唯一的一个元素值重复，其它的均只出现一次。每个数组元素只能访问一次，设计一个算法，将它找出来。如果不使用存储空间，能否设计一个算法实现？</p>
<h4 id="计数-需要辅助空间"><a href="#计数-需要辅助空间" class="headerlink" title="计数(需要辅助空间)"></a>计数(需要辅助空间)</h4><p>可以记下每个数字出现的次数，然后找到出现两次的数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">PairNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *bucket = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    <span class="built_in">memset</span>(bucket, <span class="number">0</span>, n * <span class="keyword">sizeof</span>(bucket[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//记录下每个数出现的次数，保存到对应下标下</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        bucket[arr[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历查找出现两次的数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (bucket[i] == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="异或去除重复-偶数次-项"><a href="#异或去除重复-偶数次-项" class="headerlink" title="异或去除重复(偶数次)项"></a>异或去除重复(偶数次)项</h4><ul>
<li>两个相同的数进行异或，结果是0</li>
<li>如果对一系列数进行异或，可以消除掉重复出现偶数次的数</li>
<li>将原数组的数异或一边后，再与1-n异或一边，则重复出现两次的数被异或了三次，其余的数被异或了两次被消去，因此最终结果就是原数组中出现两次的数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">PairNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历异或原数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret ^= arr[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//与1-n异或</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret ^= i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-1"><a href="#验证程序-1" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">PairNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入n:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造长度为(n+1)的数组</span></span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        arr[i] = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    srand((<span class="keyword">int</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">    arr[n] = (<span class="keyword">int</span>)(rand() * <span class="number">1.0</span> / RAND_MAX * (n - <span class="number">1</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打乱数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(arr[i], arr[(<span class="keyword">int</span>)(rand() * <span class="number">1.0</span> / RAND_MAX * n)]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出结果</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"原数组为："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"重复出现的数为："</span> &lt;&lt; PairNumber(arr, n) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-找出落单的数"><a href="#3-找出落单的数" class="headerlink" title="3.找出落单的数"></a>3.找出落单的数</h3><h4 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h4><p>一个长度为(2×n+1)的数组里除了某一个数字之外，其它的数字都出现了两次，请写出程序找出这个只出现了一次的数字。</p>
<h4 id="异或去重"><a href="#异或去重" class="headerlink" title="异或去重"></a>异或去重</h4><p>思路与上题类似，通过遍历异或消去重复出现两次的数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SingleNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret ^= arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-2"><a href="#验证程序-2" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SingleNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入n:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造长度为(2×n+1)的数组</span></span><br><span class="line">    srand((<span class="keyword">int</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span> * n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        arr[i] = arr[i + n] = rand();</span><br><span class="line">    &#125;</span><br><span class="line">    arr[<span class="number">2</span> * n] = rand();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打乱数组</span></span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">2</span> * n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(arr[i], arr[(<span class="keyword">int</span>)(rand() * <span class="number">1.0</span> / RAND_MAX * len)]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出结果</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"原数组为："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"出现一次的数为："</span> &lt;&lt; SingleNumber(arr, len) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-找出两个落单的数"><a href="#4-找出两个落单的数" class="headerlink" title="4.找出两个落单的数"></a>4.找出两个落单的数</h3><h4 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h4><p>一个长度为(2×n+2)的数组里除了某两个个数字之外，其它的数字都出现了两次，请写出程序找出这两个只出现了一次的数字。</p>
<h4 id="三次异或"><a href="#三次异或" class="headerlink" title="三次异或"></a>三次异或</h4><p>可知如果用0和所有的数都异或一遍，可以的到没有重复的两个数异或的结果。</p>
<p>因为这两个数并不相同，所以得到的结果必定不是0，即所得结果二进制中必定存在至少一个1。</p>
<p>根据异或的性质可知，这两个数在这一位的数一定不相同，一个是1，而另一个是0。那么，如果将所有该位是1的数与所有该位都是0的数分别异或，所得结果就是这两个数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; SingleNumbers(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> first = <span class="number">0</span>, second = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        temp ^= arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (temp &amp; (<span class="number">1</span> &lt;&lt; i))</span><br><span class="line">        &#123;</span><br><span class="line">            flag = <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &amp; flag)</span><br><span class="line">        &#123;</span><br><span class="line">            first ^= arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            second ^= arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> make_pair(first, second);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-3"><a href="#验证程序-3" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; SingleNumbers(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入n:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造长度为(2×n+2)的数组</span></span><br><span class="line">    srand((<span class="keyword">int</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span> * n + <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        arr[i] = arr[i + n] = rand();</span><br><span class="line">    &#125;</span><br><span class="line">    arr[<span class="number">2</span> * n] = rand();</span><br><span class="line">    arr[<span class="number">2</span> * n + <span class="number">1</span>] = arr[<span class="number">2</span> * n] + rand();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打乱数组</span></span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">2</span> * n + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(arr[i], arr[(<span class="keyword">int</span>)(rand() * <span class="number">1.0</span> / RAND_MAX * len)]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出结果</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"原数组为："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; ans = SingleNumbers(arr, len);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"出现一次的数为："</span> &lt;&lt; ans.first &lt;&lt; <span class="string">"与"</span> &lt;&lt; ans.second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-二进制中1的个数"><a href="#5-二进制中1的个数" class="headerlink" title="5.二进制中1的个数"></a>5.二进制中1的个数</h3><h4 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h4><p>给定一个整数n，输出该数二进制表示中1的个数。</p>
<h4 id="与做法之一"><a href="#与做法之一" class="headerlink" title="与做法之一"></a>与做法之一</h4><ul>
<li>两个二进制数按位与，若相同位相同，则结果为1，否则为0</li>
</ul>
<p>让一个只有最低位为1的二进制与原数与，然后不断左移，如果结果不为0则说明该位是1。</p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND1.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND2.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND3.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND4.png" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CountOneinBit</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> size = <span class="keyword">sizeof</span>(n) * CHAR_BIT;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>, temp = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n&amp;temp)</span><br><span class="line">        &#123;</span><br><span class="line">            ret++;</span><br><span class="line">        &#125;</span><br><span class="line">        temp &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="与做法之二"><a href="#与做法之二" class="headerlink" title="与做法之二"></a>与做法之二</h4><p>与做法一类似，但是改为将原数右移和1进行与运算</p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND5.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND6.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND7.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND8.png" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CountOneinBit</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span> &amp; n)</span><br><span class="line">        &#123;</span><br><span class="line">            ret++;</span><br><span class="line">        &#125;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="与做法之三"><a href="#与做法之三" class="headerlink" title="与做法之三"></a>与做法之三</h4><ul>
<li><strong>对于整数n，n&amp;(n-1)的结果是消除掉n二进制形式的最后一个。</strong></li>
</ul>
<p>不断消除整数二进制形式的最后一个1，直到原数变成0，则消除的次数就是1的个数</p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND9.png" alt></p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/AND10.png" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CountOneinBit</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        n = n &amp; (n - <span class="number">1</span>);</span><br><span class="line">        ret++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-4"><a href="#验证程序-4" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CountOneinBit</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入一个整数n："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="string">"的二进制形式中1的个数是："</span> &lt;&lt; CountOneinBit(n) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-判断一个整数是否为2的整数次方"><a href="#6-判断一个整数是否为2的整数次方" class="headerlink" title="6.判断一个整数是否为2的整数次方"></a>6.判断一个整数是否为2的整数次方</h3><h4 id="题目-5"><a href="#题目-5" class="headerlink" title="题目"></a>题目</h4><p>使用一条语句判断一个整数是否为2的整数次方</p>
<h4 id="与做法"><a href="#与做法" class="headerlink" title="与做法"></a>与做法</h4><p>易知如果一个数的二进制形式中只有一个1，则符合题意，考虑上题第三种解法，可得：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsIntegerPowerof2</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !(n &amp; (n - <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-5"><a href="#验证程序-5" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsIntegerPowerof2</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入一个整数n："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; n;</span><br><span class="line">    <span class="keyword">if</span> (!IsIntegerPowerof2(n))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"不"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"是2的整数次幂。"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-将整数的奇偶位互换"><a href="#7-将整数的奇偶位互换" class="headerlink" title="7.将整数的奇偶位互换"></a>7.将整数的奇偶位互换</h3><h4 id="题目-6"><a href="#题目-6" class="headerlink" title="题目"></a>题目</h4><p>将一个整数n的二进制形式下的奇数位与偶数位互换。</p>
<h4 id="拆分，移位，异或"><a href="#拆分，移位，异或" class="headerlink" title="拆分，移位，异或"></a>拆分，移位，异或</h4><p>具体思路如下图：</p>
<p><img src="/2019/02/07/AlgorithmIsBeautifulul-BitwiseOperation/SwapOddEven.png" alt></p>
<p>将奇位与偶位拆分开，通过移位后再次组合在一起</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SwapOddEven</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> even = n &amp; <span class="number">0xaaaaaaaa</span>;<span class="comment">//10101010....</span></span><br><span class="line">    <span class="keyword">int</span> odd  = n &amp; <span class="number">0x55555555</span>;<span class="comment">//01010101....</span></span><br><span class="line">    <span class="keyword">return</span> (even &gt;&gt; <span class="number">1</span>) ^ (odd &lt;&lt; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-6"><a href="#验证程序-6" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">int SwapOddEven(int n)；</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入一个整数n："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="string">"的奇偶位互换后是"</span> &lt;&lt; SwapOddEven(n) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-出现k次与出现1次"><a href="#8-出现k次与出现1次" class="headerlink" title="8.出现k次与出现1次"></a>8.出现k次与出现1次</h3><h4 id="题目-7"><a href="#题目-7" class="headerlink" title="题目"></a>题目</h4><p>数组中只有一个数出现了1次，其它的数都出现了k次，请输出只出现了1次的数。</p>
<h4 id="k进制不进位加法"><a href="#k进制不进位加法" class="headerlink" title="k进制不进位加法"></a>k进制不进位加法</h4><ul>
<li><strong>k个相同的k进制数之和为0</strong></li>
</ul>
<p>老实说这个解法不算很简洁，但是很独特。将所有的数转化为k进制，然后进行不进位加法，则最终的结果就是只出现了一次的数的k进制，再转回去就好。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将两个k进制数进行不进位相加</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">noCrashSum</span><span class="params">(<span class="built_in">string</span> kRadix1, <span class="built_in">string</span> kRadix2, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    reverse(kRadix1.begin(), kRadix1.end());</span><br><span class="line">    reverse(kRadix2.begin(), kRadix2.end());</span><br><span class="line">    <span class="keyword">int</span> len = max(kRadix1.length(), kRadix2.length());</span><br><span class="line">    <span class="keyword">while</span> (kRadix1.length() &lt; len)</span><br><span class="line">    &#123;</span><br><span class="line">        kRadix1 += <span class="string">"0"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (kRadix2.length() &lt; len)</span><br><span class="line">    &#123;</span><br><span class="line">        kRadix2 += <span class="string">"0"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span> ret;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret += ((kRadix1[i] - <span class="string">'0'</span> + kRadix2[i] - <span class="string">'0'</span>) % k + <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    reverse(ret.begin(), ret.end());</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//计算长度为n的k进制数组的不进位和</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">noCrashSum</span><span class="params">(<span class="built_in">string</span> kRadixs[], <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> ret;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret = noCrashSum(ret, kRadixs[i], k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将十进制整数n转化为k进制字符串</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">ToString</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> ret = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        ret += (n % k + <span class="string">'0'</span>);</span><br><span class="line">        n /= k;</span><br><span class="line">    &#125; <span class="keyword">while</span> (n);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将k进制数kRadix转化为十进制整数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ToInt</span><span class="params">(<span class="built_in">string</span> kRadix, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    reverse(kRadix.begin(), kRadix.end());</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; kRadix.length(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ret = ret * k + (kRadix[i] - <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//求在长度n的数组中，只出现一次的数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SingleNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> kRadixs[maxn];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        kRadixs[i] = ToString(arr[i], k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span> kRadixAns = noCrashSum(kRadixs, n, k);</span><br><span class="line">    <span class="keyword">return</span> ToInt(kRadixAns, k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="验证程序-7"><a href="#验证程序-7" class="headerlink" title="验证程序"></a>验证程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;array&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将两个k进制数进行不进位相加</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">noCrashSum</span><span class="params">(<span class="built_in">string</span> kRadix1, <span class="built_in">string</span> kRadix2, <span class="keyword">int</span> k)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//计算长度为n的k进制数组的不进位和</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">noCrashSum</span><span class="params">(<span class="built_in">string</span> kRadixs[], <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将十进制整数n转化为k进制字符串</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">ToString</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将k进制数kRadix转化为十进制整数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ToInt</span><span class="params">(<span class="built_in">string</span> kRadix, <span class="keyword">int</span> k)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//求在长度n的数组中，只出现一次的数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SingleNumber</span><span class="params">(<span class="keyword">int</span> *arr, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, k;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Tip: n × k &lt; "</span> &lt;&lt; maxn &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入一个n："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入一个k："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">    <span class="keyword">int</span> len = n * k + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生成数组</span></span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> value = rand();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i + n * j] = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[len - <span class="number">1</span>] = rand();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打乱数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(arr[i], arr[(<span class="keyword">int</span>)(rand() * <span class="number">1.0</span> / RAND_MAX * len)]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"原数组为："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"出现一次的数是："</span> &lt;&lt; SingleNumber(arr, len, k) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本次课程的内容就像是题目所说的“<strong>奇巧淫技</strong>”，本来对位运算了解并不多，也不怎么会用，而这次见识到的这些神奇的操作则是刷新了我对位运算的看法，体会到了算法的神奇巧妙之处。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2018/12/13/ExploreByte/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/13/ExploreByte/" class="post-title-link" itemprop="url">一次对内存的探索</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-13 23:36:50" itemprop="dateCreated datePublished" datetime="2018-12-13T23:36:50+08:00">2018-12-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-07-14 14:49:04" itemprop="dateModified" datetime="2019-07-14T14:49:04+08:00">2019-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/折腾/" itemprop="url" rel="index"><span itemprop="name">折腾</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一段程序"><a href="#一段程序" class="headerlink" title="一段程序"></a>一段程序</h2><p>故事发生在某天深夜，已经熄灯的宿舍，黯淡的屏幕闪烁出一条消息</p>
<blockquote>
<p>“睡了没”</p>
<p>“木呢。”</p>
<p>“来看段代码”</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i= <span class="number">17970</span>;</span><br><span class="line">    <span class="keyword">char</span> *q = &amp;i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *q);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *(q + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>“……，这啥操作？”</p>
<p>“输出是 50 70。”</p>
</blockquote>
<h3 id="简单总结下这段代码奇怪的地方"><a href="#简单总结下这段代码奇怪的地方" class="headerlink" title="简单总结下这段代码奇怪的地方"></a>简单总结下这段代码奇怪的地方</h3><ol>
<li>使用一个<strong>*char**</strong> <strong>指针</strong>指向了一个 <strong><em>int</em></strong> 类型的整数;</li>
<li>将<strong>*char**</strong> <strong>指针</strong>所指内容强制转化为 <strong><em>int</em></strong> 类型输出;</li>
</ol>
<h3 id="和-2-扯不断的联系"><a href="#和-2-扯不断的联系" class="headerlink" title="和 2 扯不断的联系"></a>和 2 扯不断的联系</h3><blockquote>
<p>“一个突破口是 <em>17970 % 256 = 50</em>,<em>17970 / 256 = 70</em> 。”</p>
</blockquote>
<p><strong>256</strong>是个很眼熟的数字，对于程序员来说，最直接联想到的就是<strong>2 ^ 8 = 256</strong>。这个<strong>2</strong>很是让人在意，计算机总是离不开<strong>二进制</strong>，在这里，一个涉及指针的程序突然出现了<strong>2</strong>，这就不得不让人联想到使用二进制进行进一步探索。</p>
<h4 id="使用-union"><a href="#使用-union" class="headerlink" title="使用 union"></a>使用 union</h4><p><strong>union</strong>是 C 语言里一个比较奇特的关键字，其使用方式和<strong>struct</strong>很是相似。区别在于<strong>struct</strong>中各个元素是相互独立的，互相之间不会有影响，而<strong>union</strong>则只分配一块内存，各个成员共用同一块内存空间。</p>
<p>比如说，对于以下代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> UN</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">char</span> ch[<span class="number">4</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Temp</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">char</span> ch[<span class="number">4</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>union</p>
<p><img src="/2018/12/13/ExploreByte/UN.png" alt="union"></p>
</li>
<li><p>struct</p>
<p>  <img src="/2018/12/13/ExploreByte/Temp.png" alt="struct"></p>
<p>那么使用 union 就可以模仿上述代码中用 <strong><em>char</em></strong> 的方式访问 <strong><em>int</em></strong>。</p>
</li>
</ul>
<p>首先用下述程序验证一下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">union</span> UN</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">char</span> ch[<span class="number">4</span>];</span><br><span class="line">&#125; UN;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    UN un;</span><br><span class="line">    un.a = <span class="number">17970</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, un.a);</span><br><span class="line">    <span class="keyword">for</span> (;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, un.ch[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果和预想一致：<br><code>17970</code><br><code>50 70 0 0</code></p>
<h4 id="结合二进制"><a href="#结合二进制" class="headerlink" title="结合二进制"></a>结合二进制</h4><p>那么将上述程序稍加修改，以二进制形式输出呢？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">int2Binary</span><span class="params">(<span class="keyword">int</span> temp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">33</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">memset</span>(str, <span class="string">'0'</span>, <span class="keyword">sizeof</span>(str) - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        str[i--] = temp % <span class="number">2</span> + <span class="string">'0'</span>;</span><br><span class="line">        temp /= <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (temp);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">char2Binary</span><span class="params">(<span class="keyword">char</span> temp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">9</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">memset</span>(str, <span class="string">'0'</span>, <span class="keyword">sizeof</span>(str) - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        str[i--] = temp % <span class="number">2</span> + <span class="string">'0'</span>;</span><br><span class="line">        temp /= <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (temp);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    UN un;</span><br><span class="line">    un.a = <span class="number">17970</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    int2Binary(un.a);</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        char2Binary(un.ch[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：<br><code>00000000000000000100011000110010</code><br><code>00110010</code><br><code>01000110</code><br><code>00000000</code><br><code>00000000</code><br>稍加思索 (￣.￣)</p>
<p>整理下形式<br><code>00000000 00000000 01000110 00110010</code><br><code>00110010 01000110 00000000 00000000</code><br>≖‿≖✧</p>
<p>可以看到，如果将一个 int 放大到内存去看的话，四个字节的排列方式是低权位在前，高权位在后，这点颠覆了我过往的认知。</p>
<p>其次，在这里我突然明白了为什么<strong>2 ^ 8 = 256</strong>里这个<strong>8</strong>的含义，每个字节占<strong>8</strong>位，<strong>2</strong>与<strong>8</strong>的结合产生出了<strong>256</strong>这个神奇的数字。</p>
<h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><blockquote>
<p>“也就是说，char*的作用是将 int 的一部分拿出来，再强制转化为 int 进行操作。”</p>
<p>“而一个 int 占四个字节，char 占一个字节，刚好能拿出四分之一”</p>
<p>“一个字节占 8 位，这就是 256 的原因。”</p>
<p>“最为关键的是，int 在内存中的存放方式是以一个字节为单位，低权位在后，高权位在前，这就是为什么是 50 和 70 而不是两个 0。”</p>
<p>“完美。”</p>
<p>“睡觉。”</p>
</blockquote>
<h2 id="加戏"><a href="#加戏" class="headerlink" title="加戏"></a>加戏</h2><p>如果说一个可以用 char 来逐字节的读 int 的话，那么换成<strong>其他的类型</strong>应该也是没问题的吧。</p>
<p>或者从原理上讲，从 int 的<strong>首地址</strong>出发，使用 char 将其向后 <strong><em>sizeof(int)</em></strong> 的内存中的内容读了出来。</p>
<p>那么，如果已知一个地址，使用类似的思路，是不是就能将其之后指定大小的内存中的内容读出来了？</p>
<p>按着这个想法对之前的函数稍加修改，于是就得到了一个查看内存内容的工具。 (•̀ᴗ•́)و ̑̑</p>
<p>两个参数分别是<strong>地址</strong>以及<strong>大小</strong>，返回的是以 C 风格的字符串储存的该<strong>内存中的内容</strong>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">ToBinary</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *source, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> ret_length = size * (CHAR_BIT + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">char</span> *_source = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * size);</span><br><span class="line">    <span class="built_in">memcpy</span>(_source, source, size); <span class="comment">//使用_source代替source</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> *ret = <span class="literal">NULL</span>; <span class="comment">//返回ret</span></span><br><span class="line">    <span class="keyword">if</span> (ret)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">free</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line">    ret = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * ret_length + <span class="number">1</span>);</span><br><span class="line">    ret[<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * ret_length] = <span class="number">0</span>; <span class="comment">//最后一个是0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">short</span> char_source = *(_source + index);</span><br><span class="line">        <span class="keyword">char</span> *temp = ret + index * (CHAR_BIT + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">memset</span>(temp, <span class="string">'0'</span>, <span class="keyword">sizeof</span>(<span class="keyword">char</span>) * CHAR_BIT);</span><br><span class="line">        temp[CHAR_BIT] = <span class="string">' '</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = CHAR_BIT - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            temp[j] = (char_source &amp; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">            char_source &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有意思的事情要发生了。</p>
<h3 id="左移与右移"><a href="#左移与右移" class="headerlink" title="左移与右移"></a>左移与右移</h3><p>C 语言中的 <strong>&lt;&lt;</strong> 与 <strong>&gt;&gt;</strong> 是两个比较神奇的操作符，能将一个数从内存中左移或者右移。本来潜意识里我认为就是直接移就好了。但是之前也有发现，int 在内存中的储存方式并不是一个连续的状态，而是每八个字节为一个单位，低权位在前，高权位在后。那左移和右移究竟是如何进行的呢？用上之前的函数，写个程序看看：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)&amp;x, <span class="keyword">sizeof</span>(x)));</span><br><span class="line">        x &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<p><code>00000001 00000000 00000000 00000000</code><br><code>00000010 00000000 00000000 00000000</code><br><code>00000100 00000000 00000000 00000000</code><br><code>00001000 00000000 00000000 00000000</code><br><code>00010000 00000000 00000000 00000000</code><br><code>00100000 00000000 00000000 00000000</code><br><code>01000000 00000000 00000000 00000000</code><br><code>10000000 00000000 00000000 00000000</code><br><code>00000000 00000001 00000000 00000000</code><br><code>00000000 00000010 00000000 00000000</code><br><code>00000000 00000100 00000000 00000000</code><br><code>00000000 00001000 00000000 00000000</code><br><code>00000000 00010000 00000000 00000000</code><br><code>00000000 00100000 00000000 00000000</code><br><code>00000000 01000000 00000000 00000000</code><br><code>00000000 10000000 00000000 00000000</code><br><code>00000000 00000000 00000001 00000000</code><br><code>00000000 00000000 00000010 00000000</code><br><code>00000000 00000000 00000100 00000000</code><br><code>00000000 00000000 00001000 00000000</code><br><code>00000000 00000000 00010000 00000000</code><br><code>00000000 00000000 00100000 00000000</code><br><code>00000000 00000000 01000000 00000000</code><br><code>00000000 00000000 10000000 00000000</code><br><code>00000000 00000000 00000000 00000001</code><br><code>00000000 00000000 00000000 00000010</code><br><code>00000000 00000000 00000000 00000100</code><br><code>00000000 00000000 00000000 00001000</code><br><code>00000000 00000000 00000000 00010000</code><br><code>00000000 00000000 00000000 00100000</code><br><code>00000000 00000000 00000000 01000000</code><br>可以看到，在一个字节中，<strong>左移</strong> 的确是不断向左移动，但是字节与字节之间来看，则是有些奇怪的样子。</p>
<p>看样子说成<strong>左移</strong>和<strong>右移</strong>更多的是考虑到的是易于理解，而实际上并不是简单的左移和右移。虽然并不是很理解为什么要这样设计内存的使用方式就是了。</p>
<h3 id="结构-struct"><a href="#结构-struct" class="headerlink" title="结构(struct)"></a>结构(struct)</h3><p>之前有次时间探寻了一下结构的<strong>size</strong>的问题，发现了一个有些神奇的规律。</p>
<p>设结构内各个元素的 size 之和为<strong>x</strong>，结构内最大的元素 size 为<strong>y</strong>，结构的 size 为<strong>z</strong>,则满足<strong>z &gt;= x &amp;&amp; z % y == 0</strong>。老师解释多的那部分是记录了结构的一些东西。</p>
<p>但是，果然还是自己看看才放心啊。&lt;(￣︶￣)&gt;</p>
<p>实验程序如下。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">&#125; A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">&#125; B;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> c;</span><br><span class="line">&#125; C;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> c;</span><br><span class="line">&#125; D;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    B b;</span><br><span class="line">    C c;</span><br><span class="line">    D d;</span><br><span class="line">    d.a = c.a = b.a = a.a = CHAR_MAX;</span><br><span class="line">    c.b = b.b = INT_MAX;</span><br><span class="line">    d.c = c.c = LONG_LONG_MAX;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)&amp;a, <span class="keyword">sizeof</span>(a)));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)&amp;b, <span class="keyword">sizeof</span>(b)));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)&amp;c, <span class="keyword">sizeof</span>(c)));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)&amp;d, <span class="keyword">sizeof</span>(d)));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<p><code>01111111</code></p>
<p><code>01111111 00000000 00000000 00000000 11111111 11111111 11111111 01111111</code></p>
<p><code>01111111 00000000 00000000 00000000 11111111 11111111 11111111 01111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111 01111111</code></p>
<p><code>01111111 00000000 00000000 00000000 00000000 00000000 00000000 00000000 11111111 11111111 11111111 11111111 11111111 11111111 11111111 01111111</code></p>
<p>所以多出来的那一部分里面什么都没有（°ο°）</p>
<p>好吧，还是很好奇为什么要设计成这个样子。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>在 struct 之后，我又分别测试了 union 和 class 都和想象的差不多，就不说了。但是最后我又发现了个好玩的东西。</p>
<p>我记得，函数入口是个指针吧。</p>
<p>那么最后这个程序呢？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)fun1, (<span class="keyword">char</span> *)fun2 - (<span class="keyword">char</span> *)fun1));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToBinary((<span class="keyword">char</span> *)fun2, (<span class="keyword">char</span> *)fun3 - (<span class="keyword">char</span> *)fun2));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反正是超出了我的知识范围 ╮(╯▽╰)╭</p>
<p>滚回去复习期末考试~(～ o ￣ ▽ ￣)～ o</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2018/12/01/c-withVScode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/01/c-withVScode/" class="post-title-link" itemprop="url">使用VScode编写C++文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-01 21:12:42" itemprop="dateCreated datePublished" datetime="2018-12-01T21:12:42+08:00">2018-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-07-14 14:47:04" itemprop="dateModified" datetime="2019-07-14T14:47:04+08:00">2019-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/vscode/" itemprop="url" rel="index"><span itemprop="name">vscode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>第一次接触visual studio code是在大一上学期，正是初学C语言的时候。那时候老师与学长推荐的集成开发环境（IDE）主要是Dev C++与code block，这两款IDE的优点是简单，小巧，可以很快速的使代码运行起来，但他们都有很致命的缺点，就是界面不够美观，虽然在网上都能找到一些教程对其进行美化，但能做到的也只是不再难看而已，与真正做到好看相比还差的很远。</p>
<p>恰巧那段时间因为学习前端的知识而了解到VS code这款编辑器，同样是写代码，利用VS code写HTML，CSS，JavaScript比用code block写C体验好多了，而也惊喜的发现，VS code支持书写C/C++程序<del>\(≧▽≦)/</del>，于是就想使用VS code编写C程序，但当时不明白VS code只是一个编辑器且不带编译器，并不能直接编译，运行C程序，而且在查看一些C文件时会出现乱码现象一脸懵逼(o゜▽゜)o☆（当时并不知道时编码的问题），于是在查找了众多资料无果后只好放弃〒▽〒。</p>
<p>时过境迁，一年的学习，学习的语言由简单的C拓展到C++，JAVA，C#等多种语言，编程的模式由简单的面向过程到C++式的多种模式混合，C#窗口的事件-响应函数，unity的逐帧调用等多种模式，知识储备量有了一定的提升(●ˇ∀ˇ●)，再回过头来，依旧还是想用VS code编写C/C++程序，于是在某一天，一句一句看懂了官网的文档，一步一步调试，终于在最后调试成功(´▽`ʃ♡ƪ)！经过了一段时间的使用，体验还算不错，在这里记下环境配置的方法，也记录下自己的小小激动。</p>
<p><strong>Tip: 本次记录的是在Windows10下搭建的环境</strong>(Linux下的还没折腾出来◑﹏◐)</p>
<p><strong><em>2018年12月30日更新：经过一段时间折腾，发现了其它使用VS code进行C/C++编程的方法，已经整合在了原文中。</em></strong></p>
<h2 id="配置方法"><a href="#配置方法" class="headerlink" title="配置方法"></a>配置方法</h2><h3 id="安装-Visual-Studio-Code"><a href="#安装-Visual-Studio-Code" class="headerlink" title="安装 Visual Studio Code"></a>安装 Visual Studio Code</h3><p>最开始的步骤当然时安装VS code啦，进入<a href="https://code.visualstudio.com/" target="_blank" rel="noopener"><strong>官网</strong></a>，点击很显眼的 <strong><em>Download</em></strong> 按钮，下载VS code。<br><img src="/2018/12/01/c-withVScode/VScode%E5%AE%98%E7%BD%91.png" alt="VS code官网"><br>值得一提的是，点击下载之后网页会自动跳转到VS code的<a href="https://code.visualstudio.com/docs" target="_blank" rel="noopener"><strong>文档</strong></a>界面，在这里会很方便的找到如何配置各种语言环境的说明，写的也都比较详细，是本次配置的主要参考资料。</p>
<h3 id="安装-Microsoft-C-C-extension"><a href="#安装-Microsoft-C-C-extension" class="headerlink" title="安装 Microsoft C/C++ extension"></a>安装 Microsoft C/C++ extension</h3><p>首先安装 Microsoft C/C++ extension，这是微软自家研发的VS code插件，内置了编写C++的众多工具。</p>
<ol>
<li>打开VS code</li>
<li>点击左侧侧边栏的<strong>扩展</strong>图标或者使用快捷键<strong>ctrl+shift+x</strong>打开扩展界面</li>
<li>在搜索框搜索<strong>C++</strong>寻找Microsoft C/C++ extension。</li>
<li>点击<strong>安装</strong>，安装结束后点击<strong>重载</strong></li>
</ol>
<h3 id="安装MinGW-w64"><a href="#安装MinGW-w64" class="headerlink" title="安装MinGW-w64"></a>安装MinGW-w64</h3><p>MinGW-w64是著名C/C++编译器GCC的Windows版本，是VS code官网推荐在Windows上使用的编译器（虽然官网在这里直接略过了( ˉ ▽ ˉ；)…）。</p>
<p>在网上找到了一篇介绍非常详细的博客<a href="http://rsreland.net/archives/1760" target="_blank" rel="noopener"><strong>《⑨也懂系列：MinGW-w64安装教程》</strong></a>,然后是MinGW-w64的<a href="https://mingw-w64.org" target="_blank" rel="noopener"><strong>官方网址</strong></a>,貌似会因为墙的原因使用在线安装包会失败，可以下载打包好的文件夹，在<a href="https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/" target="_blank" rel="noopener"><strong>SourceForge</strong></a>中下载就好。</p>
<p><strong><em>接下来分别介绍三种配置方法</em></strong></p>
<h3 id="一、官方配置教程"><a href="#一、官方配置教程" class="headerlink" title="一、官方配置教程"></a>一、官方配置教程</h3><h4 id="配置三个-JSON文件，搭建基本环境"><a href="#配置三个-JSON文件，搭建基本环境" class="headerlink" title="配置三个.JSON文件，搭建基本环境"></a>配置三个.JSON文件，搭建基本环境</h4><p>使用VS code编写C/C++需要建立一个工作区域的文件夹，在这个文件夹里搭建好环境。我的做法是先搭建好一个文件夹作为模板，后续使用的时候复制该文件夹。</p>
<p>新建一个文件夹，在文件夹中新建一个helloworld.cpp（<strong>命名不要换别的，后续会有说明</strong>）文件，并通过VS code打开该文件夹。</p>
<p><img src="/2018/12/01/c-withVScode/VScode%E6%96%87%E4%BB%B6%E5%A4%B9.png" alt="VS code文件夹"></p>
<h5 id="配置c-cpp-properties-json文件"><a href="#配置c-cpp-properties-json文件" class="headerlink" title="配置c_cpp_properties.json文件"></a>配置c_cpp_properties.json文件</h5><p>使用快捷键<strong>ctrl+shift+p</strong>调出命令界面，输入Cpp以找到<strong>C/Cpp: Edit configurations</strong>命令</p>
<p><img src="/2018/12/01/c-withVScode/Cpp_Edit_Configurations.png" alt="Cpp_Edit_Configurations"></p>
<p>按照注释复制以下代码到文件中</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Win32"</span>,</span><br><span class="line">            <span class="attr">"includePath"</span>: [</span><br><span class="line">                <span class="string">"$&#123;workspaceFolder&#125;/**"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"defines"</span>: [</span><br><span class="line">                <span class="string">"_DEBUG"</span>,</span><br><span class="line">                <span class="string">"UNICODE"</span>,</span><br><span class="line">                <span class="string">"_UNICODE"</span></span><br><span class="line">            ],</span><br><span class="line">            "compilerPath": "C:\\MinGW\\mingw64\\bin\\gcc.exe",//这里替换成自己电脑上对应的地址</span><br><span class="line">            "cStandard": "c11",</span><br><span class="line">            "cppStandard": "c++17",</span><br><span class="line">            "intelliSenseMode": "msvc-x64"</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    "version": 4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="配置tasks-json文件"><a href="#配置tasks-json文件" class="headerlink" title="配置tasks.json文件"></a>配置tasks.json文件</h5><p>使用快捷键<strong>ctrl+shift+p</strong>调出命令界面，找到<strong>Tasks: Configure Task</strong>命令</p>
<p><img src="/2018/12/01/c-withVScode/Tasks_Command.png" alt="Tasks_Command"></p>
<p>单击后点击<strong>使用模板创建task.json文件</strong></p>
<p><img src="/2018/12/01/c-withVScode/Tasks_Command_Template.png" alt="Tasks_Command_Template"></p>
<p>单击<strong>Others</strong></p>
<p><img src="/2018/12/01/c-withVScode/Tasks_Command_Others.png" alt="Tasks_Command_Others"></p>
<p>将下述代码复制到文件中</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">    <span class="attr">"tasks"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"build hello world"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"g++"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                <span class="string">"-g"</span>, <span class="string">"helloworld.cpp"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"group"</span>: &#123;</span><br><span class="line">                <span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">                <span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="配置launch-json文件"><a href="#配置launch-json文件" class="headerlink" title="配置launch.json文件"></a>配置launch.json文件</h5><p>单击<strong>调试</strong>或者使用快捷键<strong>F5</strong>调出调试界面</p>
<p><img src="/2018/12/01/c-withVScode/Debug_Command.png" alt="Debug_Command"></p>
<p>选择<strong>C++（GDB/LLDB）</strong></p>
<p>按注释中的提示粘贴以下代码到弹出来的文件中</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/a.exe"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [],</span><br><span class="line">            <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">            <span class="attr">"environment"</span>: [],</span><br><span class="line">            <span class="attr">"externalConsole"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">            "miDebuggerPath": "C:\\MinGW\\mingw64\\bin\\gdb.exe",//替换成自己电脑上对应的位置</span><br><span class="line">            "setupCommands": [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                    <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            "preLaunchTask": "build hello world"</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="各种设置"><a href="#各种设置" class="headerlink" title="各种设置"></a>各种设置</h4><p>上述三个文件写好之后保存，基本的环境就已经搭建起来了,在.cpp中编写好代码，使用快捷键<strong>F5</strong>就可以看到一闪而过的终端，表明环境搭建正确，已经可以使用VS code进行C/C++的编程。</p>
<p>但以上三个文件都是按照官网给的示例配置的，使用起来可能不是很顺手，我是在它的基础上修改了一些</p>
<h4 id="修改-cpp命名"><a href="#修改-cpp命名" class="headerlink" title="修改.cpp命名"></a>修改.cpp命名</h4><p>在官网给出的文档中，默认了使用<strong>helloworld.cpp</strong>这个文件名，若想替换的话，需要修改<strong>task.json</strong>文件的<strong>args</strong>参数，以<strong>main.cpp</strong>为例</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"args": [</span><br><span class="line">        "-g", "helloworld.cpp"</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"args": [</span><br><span class="line">        "-g", "main.cpp"</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h4 id="修改-exe文件名"><a href="#修改-exe文件名" class="headerlink" title="修改.exe文件名"></a>修改.exe文件名</h4><p>经GCC编译出的程序默认名为<strong>a.exe</strong>,和我的习惯不太搭，这个也是可以修改的，其实如果了解过GCC的话，很容易就能猜出<strong>task.json</strong>文件的<strong>args</strong>参数就是使用GCC编译时的命令，所以只需要在原有基础上再添加一个命令就好。</p>
<p>这里以<strong>main.exe</strong>为例，在<strong>task.json</strong>中添加下列命令</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"args": [</span><br><span class="line">        ......</span><br><span class="line">        "-o", "main.exe"</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>之后修改<strong>launch.json</strong>中的<strong>program</strong>参数为</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"program": "$&#123;workspaceFolder&#125;/main.exe",</span><br></pre></td></tr></table></figure>

<h4 id="终端一闪而逝"><a href="#终端一闪而逝" class="headerlink" title="终端一闪而逝"></a>终端一闪而逝</h4><p>有个比较难接受的事情是使用VS code进行调试时程序一旦结束终端就会关掉，给调试带来了一定的困难，这点的原因是程序结束了就结束了，一些IDE会在最后加上一个命令让它停在那里，而VS code自然不会带这个，比较一般的解决方案是在代码最后加上<code>getchar()</code>,<code>cin.get()</code>,<code>system(&quot;pause&quot;)</code>这样的代码，在绝大多数情况下这样写显示的结果和需要的是一样的</p>
<h4 id="OI-ACM-ICPC等算法题目的文件重定向"><a href="#OI-ACM-ICPC等算法题目的文件重定向" class="headerlink" title="OI/ACM ICPC等算法题目的文件重定向"></a>OI/ACM ICPC等算法题目的文件重定向</h4><p>在很多算法竞赛或者是算法题目中，后台会将提交的代码输入输出重定向到对应的文件中，这样处理起来会很快。而在写题的时候，也有不少选手也会做类似的处理，加上<code>freopen</code>之类函数，一方面测试的速度可以加快，另一方面也能很好的对数据进行分析。</p>
<p>而在VS code中，可以通过一些小配置达到更理想的情况，使程序从一个指定文件中读入数据并输出到另一个指定的文件中，原理也是使用了一些命令。</p>
<p>以从同目录下的<strong>in.txt</strong>读入并输出到<strong>out.txt</strong>为例。</p>
<p>在<strong>task.json</strong>文件的<code>&quot;args&quot;: []</code>中添加参数，效果如下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"args": [</span><br><span class="line">    "&lt;",</span><br><span class="line">    "in.txt",</span><br><span class="line">    "&gt;",</span><br><span class="line">    <span class="string">"out.txt"</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>这样就实现了从<strong>in.txt</strong>中读取数据并输出到<strong>out.txt</strong>中。</p>
<p>关于使用vscode做算法竞赛请看这篇<a href="\2019\07\12\VScode-C-Algorithmic-Competition\index.html"><strong>&lt;&lt;以最优雅的方式做算法竞赛&gt;&gt;</strong></a></p>
<h3 id="二、使用C-C-Compile-Run插件"><a href="#二、使用C-C-Compile-Run插件" class="headerlink" title="二、使用C/C++ Compile Run插件"></a>二、使用C/C++ Compile Run插件</h3><p>老实讲这个方法我是拒绝的o((&gt;ω&lt; ))o，之前为了配置环境，写配置文件看了很多东西，结果用这种方法，竟然这么简单……</p>
<h4 id="下载C-C-Compile-Run"><a href="#下载C-C-Compile-Run" class="headerlink" title="下载C/C++ Compile Run"></a>下载C/C++ Compile Run</h4><p>直接在VS code的插件商店里搜索C/C++ Compile Run<br><img src="/2018/12/01/c-withVScode/CompileRun.png" alt="C/C++ Compile Run"><br>然后一路安装重新加载。<br><strong>配</strong><br><strong>置</strong><br><strong>完</strong><br><strong>成</strong><br><strong>！</strong></p>
<h4 id="使用F6一键编译运行"><a href="#使用F6一键编译运行" class="headerlink" title="使用F6一键编译运行"></a>使用<strong>F6</strong>一键编译运行</h4><p>写好C/C++程序之后，直接使用<strong>F6</strong>一键编译运行就能出结果。QAQ</p>
<p><img src="/2018/12/01/c-withVScode/F6toCompile.png" alt="F6toCompile"></p>
<p>可以看出来程序在终端页面进行执行，成功运行并结束。</p>
<p>而且更关键的是，这个编译运行的是当前编辑的文件，也就是说，不必一个文件夹配置一个环境来编写程序，只要有代码就好,,ԾㅂԾ,,</p>
<p>和官网的方法比起来，使用<strong>C/C++ Compile Run</strong>插件更为方便快捷，也更加简单，但是因为没有了配置文件，灵活性会差点。</p>
<h3 id="三、使用终端"><a href="#三、使用终端" class="headerlink" title="三、使用终端"></a>三、使用终端</h3><p>方法二中插件的做法给了我另外一种思路。</p>
<p>既然在Windows下本质都是间接使用mingw，那为什么不直接在命令行用mingw呢？比较令人兴奋的是，VS code提供了另一种使用终端的方法</p>
<h4 id="使用ctrl-shift-打开终端"><a href="#使用ctrl-shift-打开终端" class="headerlink" title="使用ctrl+shift+`打开终端"></a>使用ctrl+shift+`打开终端</h4><p>在VS code中，可以使用快捷键<strong>ctrl</strong>+<strong>shift</strong>+<strong>`</strong>新建一个终端(有点类似于在一些安装了图形化界面的Linux中<strong>在当前文件夹打开终端</strong>的命令)。</p>
<p>接着，使用<code>g++ main.cpp -o main.exe</code>或者<code>gcc main.cpp -o main.exe</code>编译源代码</p>
<p>使用<code>./main.exe</code>运行程序</p>
<p><img src="/2018/12/01/c-withVScode/g++.png" alt="g++"></p>
<p>能够在在VS code里使用终端还是挺让人惊艳的，而直接利用mingw进行编译，速度较其它方法快多了，而且可以通过调整参数，使得编译更加的灵活。</p>
<h3 id="一些推荐的插件"><a href="#一些推荐的插件" class="headerlink" title="一些推荐的插件"></a>一些推荐的插件</h3><p>毕竟用VS code的还是因为想要个好看的界面，有一些有意思的插件不得不说下</p>
<ul>
<li><p><strong><em>background</em></strong> 为VS code加上一个可爱的小姑娘作为背景（。＾▽＾），亦可以自定义最多三张图片作为背景图片，配置的时候需要一些简单的CSS基础。</p>
</li>
<li><p><strong><em>Bracket Pair Colorizer</em></strong> 彩虹花括号插件，为代码中的括号加上色彩，整体更加漂亮，结构也比较清晰。</p>
</li>
<li><p><strong><em>One Dark Pro</em></strong> 一个主题插件，蛮好看的倒是。</p>
</li>
</ul>
<h3 id="一些小tip"><a href="#一些小tip" class="headerlink" title="一些小tip"></a>一些小tip</h3><p>除了使用插件之外，VS code还有一大堆设置，具体都在<strong>文件</strong>=&gt;<strong>首选项</strong>=&gt;<strong>设置</strong>里，不过能看到有<strong>用户设置</strong>与<strong>工作区设置</strong>，他们之间的关系有点类似于C语言中的全局变量与局部变量，如果修改了<strong>工作区设置</strong>，会在当前文件夹中自动生成一个<strong>settings.json</strong>文件，记录下各个改动，对于某一工作区而言，<strong>工作区设置</strong>的优先级要高于<strong>用户设置</strong>，一旦<strong>工作区设置</strong>中的某项设置不为默认值，则使用<strong>工作区设置</strong>下的该项设置，否则采用<strong>用户设置</strong>下的该项设置</p>
<h2 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h2><p>到目前为止，VS code依旧是我用起来最顺手的编辑器没有之一┗|｀O′|┛ 嗷~~，它优秀而又强大的扩展性满足了我对一个编辑器的绝大多数想象，我在不断的折腾中一次又一次的见识到了它的魅力，我相信它会伴随我相当一段时间。</p>
<p>后续的话，会逐渐写些VS code对其它语言的支持，当然前提是学了那些语言👻。不过目前的打算是先学精一门语言，漫无目的的游荡了好长时间，我得静下心来了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://cliuyang.github.io/2018/11/07/Proteus安装，破解，汉化教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="陈留阳">
      <meta itemprop="description" content="人外有人，天外有天。卧薪尝胆，永不言弃！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈留阳">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/07/Proteus安装，破解，汉化教程/" class="post-title-link" itemprop="url">Proteus安装，破解，汉化教程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-07 13:30:47" itemprop="dateCreated datePublished" datetime="2018-11-07T13:30:47+08:00">2018-11-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-05 17:39:50" itemprop="dateModified" datetime="2019-01-05T17:39:50+08:00">2019-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近在学校里做电路实验，老师要求在自己的电脑上下载Proteus这款软件并进行模拟仿真实验，于是在网上搜寻了相关的教程，整理后理清了整个安装破解的思路与方法。写下来，一是留作以后备用，不用再查很多资料，二是熟悉下Markdown的语法，当作一个练手的博客。</p>
<p>其实使用破解软件从根本上讲是不对的，如果有能力的话，一定要支持正版。即便是现在没有能力，等到以后有能力承担得起正版所需要支付的费用的时候，一定要补回自己使用曾使用盗版而躲过的费用。</p>
<p><strong>声明：</strong><br>本教程是从互联网上搜集整理而成，资源资料都来自互联网，并非原创。</p>
<p>本教程选取的Proteus版本为<strong>Proteus 8.7 SP3 Professional</strong>，是写此教程时能找到的最新的版本</p>
<h2 id="资源下载"><a href="#资源下载" class="headerlink" title="资源下载"></a>资源下载</h2><p><strong><span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMWJ3M1VtZlQ1Q2hfMWgtM253NGZ3Vnc=">下载Proteus相关资源<i class="fa fa-external-link-alt"></i></span></strong></p>
<p>下载好后，会有两个文件夹和一个.exe的可执行文件，其中，一个是汉化包文件夹，里面包含了汉化Proteus所需的<strong>汉化包</strong>；一个是<strong>破解文件文件夹</strong>，通过替换对应文件来实现破解；最后一个是Proteus8.7的<strong>安装程序</strong>，从<span class="exturl" data-url="aHR0cHM6Ly9wcm90ZXVzLnNvZnQxMTIuY29tLw==">官网下载<i class="fa fa-external-link-alt"></i></span>的话需要科学上网，因为显而易见的原因这对绝大多数人来讲不是件可以做到的事情，因此使用在网上传播的整合好的安装程序。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>双击<strong>安装程序</strong>进行安装<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E8%A7%A3%E5%8E%8B%E7%BC%A9%E5%90%8E.png" alt></p>
<p>点击<strong>Next</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B1.png" alt></p>
<p>将<strong>I accept the terms of this agreement.</strong>选中，之后点击<strong>Next</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B2.png" alt></p>
<p>保持默认的选项点击<strong>Next</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B3.png" alt></p>
<p>点击<strong>Next</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B4.png" alt></p>
<p>在弹出的界面里，点击左下角的<strong>Browser For Key File</strong> （浏览文件夹找许可证）<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B5.png" alt></p>
<p>许可文件是<strong>破解文件文件夹</strong>的<strong>Crack</strong>文件夹中的<strong>Licence.lxk</strong>，选中后点击右下角的打开<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B6.png" alt></p>
<p>当界面如图显示时，点击左下角的<strong>Install</strong>，进行安装许可证<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B7.png" alt></p>
<p>在弹出的界面中点击<strong>是</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B8.png" alt></p>
<p>当界面如图所示的时候，点击右下角的<strong>Close</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B9.png" alt></p>
<p>图上的选项是对早期版本的一些兼容，如果理解的话可以酌情选择，否则的话，直接点击<strong>Next</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B10.png" alt></p>
<p>选择<strong>第一个</strong>进行安装，二者的差异右边解释的很详尽，如果不理解的话，直接选第一个就好<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B11.png" alt></p>
<p>等待<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B12.png" alt></p>
<p>安装过程结束，<strong>先不要运行</strong>，点击右下角<strong>Close</strong>关闭安装程序，准备开始破解。<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B13.png" alt></p>
<h2 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h2><p>Proteus是<strong>默认安装在C盘</strong>中的，这点我暂时还没有找到迁移的方法，如果有想法的话，欢迎来讨论。<br>如果是在windows10系统中，打开C:\Program Files (x86)\Labcenter Electronics\Proteus 8 Professional这个目录，这是Proteus的<strong>关键文件目录</strong>Proteus的一些关键文件就在这个目录下：<br>C=&gt; Program Files (x86) =&gt; Labcenter Electronics =&gt; Proteus 8 Professional<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%A0%B4%E8%A7%A3%E8%BF%87%E7%A8%8B1.png" alt></p>
<p>打开<strong>破解文件文件夹</strong>=&gt;Crack=&gt;Proteus 8 Professional<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%A0%B4%E8%A7%A3%E8%BF%87%E7%A8%8B2.png" alt></p>
<p>将<strong>破解文件文件夹</strong>中的<strong>BIN</strong>文件复制到Proteus的<strong>关键文件目录</strong>中<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%A0%B4%E8%A7%A3%E8%BF%87%E7%A8%8B3.png" alt></p>
<p>在弹出的窗口中选择<strong>替换目标中的文件</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%A0%B4%E8%A7%A3%E8%BF%87%E7%A8%8B4.png" alt></p>
<p>至此，Proteus 8.7破解完成，启动Proteus即可使用</p>
<h2 id="汉化"><a href="#汉化" class="headerlink" title="汉化"></a>汉化</h2><p>其实大致看看也能看懂各个单词的意思，汉化不是什么很必须的事情</p>
<p>打开Proteus的<strong>关键文件目录</strong>和<strong>汉化包文件夹</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E6%B1%89%E5%8C%96%E8%BF%87%E7%A8%8B1.png" alt><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E6%B1%89%E5%8C%96%E8%BF%87%E7%A8%8B2.png" alt></p>
<p>打开<strong>汉化包文件夹</strong>的<strong>中文语言包</strong>文件夹与Proteus<strong>关键文件目录</strong>的<strong>Translations</strong>文件夹<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E6%B1%89%E5%8C%96%E8%BF%87%E7%A8%8B3.png" alt><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E6%B1%89%E5%8C%96%E8%BF%87%E7%A8%8B4.png" alt></p>
<p>将中文语言包文件夹中的<strong>proteus_zh_CN.qm</strong>文件复制到<strong>Translations</strong>文件夹中，至此，Proteus 8.7汉化完成<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E6%B1%89%E5%8C%96%E8%BF%87%E7%A8%8B5.png" alt></p>
<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><p>打开主页面后，点击<strong>新建工程</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B1.png" alt></p>
<p>选择<strong>新工程</strong>，修改完<strong>路径</strong>与<strong>工程名</strong>之后，点击<strong>下一步</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B2.png" alt></p>
<p>点击<strong>下一步</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B3.png" alt></p>
<p>点击<strong>下一步</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B4.png" alt></p>
<p>点击<strong>下一步</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B5.png" alt></p>
<p>点击<strong>完成</strong><br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B6.png" alt></p>
<p>初始界面如图<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B7.png" alt></p>
<p>如果想找到某个元件，可依此点击<strong>P</strong>，填写<strong>关键字</strong>，<strong>双击</strong>需要的元件将其添加到菜单中<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B8.png" alt></p>
<p>或者点击<strong>L</strong>，在库中按照分类寻找<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B9.png" alt></p>
<p>绘制出一个简单的电路<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B10.png" alt></p>
<p>点击左下角三角形按钮开始运行<br><img src="/2018/11/07/Proteus安装，破解，汉化教程/%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B11.png" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="陈留阳"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">陈留阳</p>
  <div class="site-description" itemprop="description">人外有人，天外有天。卧薪尝胆，永不言弃！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NsaXV5YW5n" title="GitHub → https://github.com/cliuyang"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOmNsaXV5YW5nMjQ5QGdtYWlsLmNvbQ==" title="E-Mail → mailto:cliuyang249@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="dGVuY2VudDovL0FkZENvbnRhY3QvP2Zyb21JZD00NSZmcm9tU3ViSWQ9MSZzdWJjbWQ9YWxsJnVpbj0yNDkzNzI0OTc=" title="QQ → tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=249372497"><i class="fab fa-qq fa-fw"></i>QQ</span>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fas fa-dragon"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈留阳</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  <script src="/js/local-search.js"></script>








<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


</body>
</html>
